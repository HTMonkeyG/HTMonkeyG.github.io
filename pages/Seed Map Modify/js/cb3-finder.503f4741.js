"use strict";function __CB__debounce(e,n){var i;return function(){clearTimeout(i);var t=arguments;i=setTimeout((function(){e.apply(this,t)}),n||1)}}function memoizeQuickLRU(e,n){var i=new QuickLRU(n),t=function(){var t=n.hash.apply(null,arguments);if(i.has(t))return i.get(t);var o=e.apply(null,arguments);return void 0!==o&&i.set(t,o),o};return t.clear=function(){i.clear()},t}function handleBedrockSeed(e){function n(n,a){var s=null!=n?n:CB3Libs.Long.ONE;t=n;var l=null;if(i.use32BitSeed){var c=function(e){return{seed:CB3Libs.Long.fromInt(e.toInt()),seedDisplay:e.toInt()}}(s);s=c.seed,l=c.seedDisplay}(a!==r||null!=o&&!s.equals(o))&&(o=s,r=a,e.trigger("seedchange",[s,a,l]))}var i={},t=null,o=null,r=null;e.on("seedchangeui",(function(e,i,t){n(i,t)})),e.on("platformchange",(function(e,o){var a=i;i=o,a.use32BitSeed!==o.use32BitSeed&&n(t,r)}))}function isTouch(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}Math.frac=function(e){return e-Math.trunc(e)},String.prototype.hashCode=function(){var e=0;if(0==this.length)return e;for(var n=0;n<this.length;n++){e=(e<<5)-e+this.charCodeAt(n),e&=e}return e},window.__seedMapPoisSprite={"amethyst.png":{x:134,y:0,width:26,height:25},"ancient-city.png":{x:0,y:177,width:16,height:26},"bastion-bridge.png":{x:30,y:0,width:26,height:26},"bastion-stables.png":{x:0,y:26,width:26,height:26},"bastion-treasure.png":{x:26,y:26,width:26,height:26},"bastion-units.png":{x:56,y:0,width:26,height:26},"buried-treasure.png":{x:160,y:0,width:24,height:24},"cave-special.png":{x:56,y:26,width:26,height:26},"cave.png":{x:0,y:52,width:26,height:26},"desert-temple.png":{x:26,y:52,width:26,height:26},"desert-well.png":{x:184,y:0,width:22,height:25},"dungeon-skeleton.png":{x:160,y:24,width:24,height:24},"dungeon-spider.png":{x:160,y:48,width:24,height:24},"dungeon-zombie.png":{x:160,y:72,width:24,height:24},"dungeon.png":{x:160,y:96,width:24,height:24},"end-city-ship.png":{x:52,y:52,width:26,height:26},"end-city.png":{x:82,y:0,width:26,height:26},"end-gateway.png":{x:82,y:26,width:26,height:26},"fossil.png":{x:134,y:25,width:26,height:25},"golden-apple.png":{x:134,y:74,width:23,height:26},"igloo-basement.png":{x:82,y:52,width:26,height:26},"igloo.png":{x:0,y:78,width:26,height:26},"jungle-temple.png":{x:26,y:78,width:26,height:26},"lava-bucket.png":{x:184,y:25,width:22,height:25},"lava-cave.png":{x:52,y:78,width:26,height:26},"mansion.png":{x:160,y:120,width:24,height:24},"mineshaft.png":{x:134,y:100,width:23,height:26},"nether-fortress.png":{x:78,y:78,width:26,height:26},"ocean-monument.png":{x:0,y:130,width:26,height:23},"ocean-ruin-special.png":{x:108,y:0,width:26,height:26},"ocean-ruin.png":{x:108,y:26,width:26,height:26},"pillager-outpost.png":{x:108,y:52,width:26,height:26},"ravine-special.png":{x:108,y:78,width:26,height:26},"ravine-underwater-special.png":{x:0,y:104,width:26,height:26},"ravine-underwater.png":{x:26,y:104,width:26,height:26},"ravine.png":{x:52,y:104,width:26,height:26},"raw-copper.png":{x:26,y:130,width:26,height:22},"raw-iron.png":{x:134,y:50,width:26,height:24},"ruined-portal.png":{x:78,y:104,width:26,height:26},"shipwreck.png":{x:184,y:128,width:21,height:24},"spawn.png":{x:0,y:0,width:30,height:26},"stronghold.png":{x:0,y:153,width:24,height:24},"trail-ruin.png":{x:104,y:104,width:26,height:26},"trial-chamber.png":{x:24,y:153,width:24,height:24},"village-zombie.png":{x:184,y:50,width:20,height:26},"village.png":{x:184,y:76,width:20,height:26},"witch-hut.png":{x:184,y:102,width:20,height:26}},window.__seedMapPoisSpriteImage="data:image/PNG;base64,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",window._enableAnalytics=!1,window.__forcedVersion=77,window.__analytics_biomeRequests=0;var QuickLRU=function(){function e(e,i){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=n(e))||i&&e&&"number"==typeof e.length){t&&(e=t);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function n(e,n){if(e){if("string"==typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,n):void 0}}function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=new Array(n);n>i;i++)t[i]=e[i];return t}function t(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var o=function(){function n(e){if(void 0===e&&(e={}),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}var i=n.prototype;return i._set=function(n,i){if(this.cache.set(n,i),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(var t,o=e(this.oldCache.entries());!(t=o()).done;){var r=t.value,a=r[0],s=r[1];this.onEviction(a,s)}this.oldCache=this.cache,this.cache=new Map}},i.get=function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var n=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,n),n}},i.set=function(e,n){return this.cache.has(e)?this.cache.set(e,n):this._set(e,n),this},i.has=function(e){return this.cache.has(e)||this.oldCache.has(e)},i.peek=function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0},i.delete=function(e){var n=this.cache.delete(e);return n&&this._size--,this.oldCache.delete(e)||n},i.clear=function(){this.cache.clear(),this.oldCache.clear(),this._size=0},function(e,n,i){n&&t(e.prototype,n),i&&t(e,i)}(n,[{key:"size",get:function(){for(var n,i=0,t=e(this.oldCache.keys());!(n=t()).done;){var o=n.value;this.cache.has(o)||i++}return Math.min(this._size+i,this.maxSize)}}]),n}();return o}(),loadMinecraftSave=function(){function e(n,i,t){return(n=n[(i=Array.isArray(i)?i:i.split("."))[0]])&&i.length>1?e(n,i.slice(1)):void 0===n?t:n}function n(n,i){return e(n,i.reduce((function(e,n){return e.concat(n,"value")}),n.isBedrock?["value"]:["value","Data","value"]))}return function(e,i){new FileReader,function(e,n){var i=new FileReader;i.onload=function(){2===i.readyState&&n(null,i.result)},i.onerror=function(){n(i.error||"error")},i.readAsArrayBuffer(e)}(e,(function(e,t){if(e)i(e);else{try{window.nbt.parse(t,(function(e,t){return e?void i(e):void i(null,{isBedrock:t.isBedrock,getSeed:function(){var e=n(t,["RandomSeed"]);return null==e&&(e=n(t,["WorldGenSettings","seed"])),null==e?null:t.isBedrock?CB3Libs.Long.fromBits(e[0],e[1]).toString():CB3Libs.Long.fromBits(e[1],e[0]).toString()},getLevelName:function(){return n(t,["LevelName"])},getSpawn:function(){return[n(t,["SpawnX"]),n(t,["SpawnY"]),n(t,["SpawnZ"])]}})}))}catch(e){i(e)}}}))}}(),CB3SharedTaskManagerMain={init:function(e){var n=new QuickLRU({maxSize:32}),i={};e.forEach((function(e){e.addEventListener("message",(function(t){if("sharedTaskPerformResult"===t.data.type){var o=t.data.key,r=t.data.result;n.set(o,r),i[o].forEach((function(e){e(r)})),delete i[o]}else if("sharedTaskGet"===t.data.type){o=t.data.key;if(n.has(o))return void e.postMessage({type:"sharedTaskResult",key:o,result:n.get(o)});if(i[o])return void i[o].push((function(n){e.postMessage({type:"sharedTaskResult",key:o,result:n})}));i[o]=[],e.postMessage({type:"sharedTaskPerform",key:o})}}),!1)}))}},ChunkApp={config:{maxSeeds:100,distantChunkWidth:16,maxChunkWidth:80,minChunkWidth:1},Platform:{java_1_21_lb:{label:"Java 1.21 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_21,config:{largeBiomes:!0}}},java_1_21:{label:"Java 1.21",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_21,config:{}}},java_1_20_lb:{label:"Java 1.20 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_20,config:{largeBiomes:!0}}},java_1_20:{label:"Java 1.20",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_20,config:{}}},java_1_19_3_lb:{label:"Java 1.19.3 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_19_3,config:{largeBiomes:!0}}},java_1_19_3:{label:"Java 1.19.3",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_19_3,config:{}}},java_1_19_lb:{label:"Java 1.19 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_19,config:{largeBiomes:!0}}},java_1_19:{label:"Java 1.19",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_19,config:{}}},java_1_18_lb:{label:"Java 1.18 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_18,config:{largeBiomes:!0}}},java_1_18:{label:"Java 1.18",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_18,config:{}}},java_1_17_lb:{label:"Java 1.17 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_17,config:{largeBiomes:!0}}},java_1_17:{label:"Java 1.17",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_17,config:{}}},java_1_16_lb:{label:"Java 1.16 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_16,config:{largeBiomes:!0}}},java_1_16:{label:"Java 1.16",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_16,config:{}}},java_1_15_lb:{label:"Java 1.15 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_15,config:{largeBiomes:!0}}},java_1_15:{label:"Java 1.15",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_15,config:{}}},java_1_14_lb:{label:"Java 1.14 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_14,config:{largeBiomes:!0}}},java_1_14:{label:"Java 1.14",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_14,config:{}}},java_1_13_lb:{label:"Java 1.13 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_13,config:{largeBiomes:!0}}},java_1_13:{label:"Java 1.13",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_13,config:{}}},java_1_12_lb:{label:"Java 1.12 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_12,config:{largeBiomes:!0}}},java_1_12:{label:"Java 1.12",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_12,config:{}}},java_1_11_lb:{label:"Java 1.11 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_11,config:{largeBiomes:!0}}},java_1_11:{label:"Java 1.11",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_11,config:{}}},java_1_10_lb:{label:"Java 1.10 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_10,config:{largeBiomes:!0}}},java_1_10:{label:"Java 1.10",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_10,config:{}}},java_1_9_lb:{label:"Java 1.9 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_9,config:{largeBiomes:!0}}},java_1_9:{label:"Java 1.9",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_9,config:{}}},java_1_8_lb:{label:"Java 1.8 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_8,config:{largeBiomes:!0}}},java_1_8:{label:"Java 1.8",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_8,config:{}}},java_1_7_lb:{label:"Java 1.7 (LB)",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_7,config:{largeBiomes:!0}}},java_1_7:{label:"Java 1.7",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_7,config:{}}},bedrock_1_21:{label:"Bedrock 1.21",cb3World:{edition:CB3Libs.Edition.Bedrock,bedrockVersion:CB3Libs.BedrockVersion.V1_21,config:{}}},bedrock_1_20_60:{label:"Bedrock 1.20.60",cb3World:{edition:CB3Libs.Edition.Bedrock,bedrockVersion:CB3Libs.BedrockVersion.V_1_20_60,config:{}}},bedrock_1_20:{label:"Bedrock 1.20",cb3World:{edition:CB3Libs.Edition.Bedrock,bedrockVersion:CB3Libs.BedrockVersion.V1_20,config:{}}},bedrock_1_19:{label:"Bedrock 1.19",cb3World:{edition:CB3Libs.Edition.Bedrock,bedrockVersion:CB3Libs.BedrockVersion.V1_19,config:{}}},bedrock_1_18:{label:"Bedrock 1.18",cb3World:{edition:CB3Libs.Edition.Bedrock,bedrockVersion:CB3Libs.BedrockVersion.V1_18,config:{}}},bedrock_1_17:{label:"Bedrock 1.17",use32BitSeed:!0,cb3World:{edition:CB3Libs.Edition.Bedrock,bedrockVersion:CB3Libs.BedrockVersion.V1_17,config:{}}},bedrock_1_16:{label:"Bedrock 1.16",use32BitSeed:!0,cb3World:{edition:CB3Libs.Edition.Bedrock,bedrockVersion:CB3Libs.BedrockVersion.V1_16,config:{}}},bedrock_1_14:{label:"Bedrock 1.14",use32BitSeed:!0,cb3World:{edition:CB3Libs.Edition.Bedrock,bedrockVersion:CB3Libs.BedrockVersion.V1_14,config:{}}},java:{label:"Java",cb3World:{edition:CB3Libs.Edition.Java,javaVersion:CB3Libs.JavaVersion.V1_7,config:{}}},bedrock:{label:"Bedrock",use32BitSeed:!1,cb3World:{edition:CB3Libs.Edition.Bedrock,bedrockVersion:CB3Libs.BedrockVersion.V1_19,config:{}}}}},appHelpers={toLong:function(e){if(e.match(/^[-+]?\d+$/)){var n,i;if(e.startsWith("+")?(n=1,i=e.substr(1)):e.startsWith("-")?(n=-1,i=e.substr(1)):(n=1,i=e),(i=i.replace(/^[0]+/g,"")).length<1)i="0";else if(i.length>20)return;var t=CB3Libs.Long.fromString(i).multiply(CB3Libs.Long.fromNumber(n)),o=i;return 0>n&&(o="-"+o),t.toString()!==o?void 0:t}}},chunkAppLoader=function(){function e(){$("img.loader").addClass("hidden"),$("#app").removeClass("hidden")}function n(n){var i=$("body");n.compassImage=new Image,n.compassImage.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAjCAYAAACOysqWAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAIpSURBVHjatNZLiE5hGADgQ+NSQ9OURCZqNmMxFposXJKRpCyUwmQhC0VqllJjYTMiudQoQ8Sw4VloyjVZKLdMFqOMJhZWyqWGSLLQHAvv1On4rzPHX1+93/vX93znuydI6ihbsT2bS9O0YknqBN5F+S/ABjzEGDr/B3AOmzCO50UDW3Aq4l9I0VokcA0dEX8OYKAooNPfX4LZ+BTAOOYXAVxBV8RzM0CKE1MFOjCYqc/JAT/ROBXgPPZWAFL0TBZowy3MqAJ8QcNkgD4cyOVm4UMOSLG/XmAR7sWk5v/7VgJ4Xy9wFEdK5C+VaHyi7KgVaIreL8zlB3AS3WWAkVqBgziTy/XnluvxMsj6akAD7sQKyg7X/RId6S8BPKkG7MPlTL0HjzCtzFxdLYEsrwTcxoqIuzEU50+l5XwjB9wsB3ThesS7MIzmamdVmqZJDGEWaS0FDGIJ1mEk9kJSCxDI0wxwMQ9sxOEAXuYmuVZgJl4F8BvNWaAHx3A3Mwd1AYE0xaMgRe8EMA/P8AJr6nxl/LOxsADfA5me4EJU2uttvNyViaXRZt/EW2dzhUZWZp8pURpjMTSVO+TiBTKaoKVKL99Gb7LIssitrXTZoKWWYXgcjQ1ncu2RW1PEpf865mkMe3JfsKoI4FPs8t3RaILFRQIfcSjiFDszcSHAB5zObMifcYx8xeqigJOZ+hgeYLSoL/iFs5n6tnJn/2SBN+jN5YbwA23VgD8DAFBvAMPgFT/mAAAAAElFTkSuQmCC",n.compassImage.onload=function(){(handleBedrockSeed(n),"function"==typeof $.fn.seedControls)&&i.find("#world-controls").each((function(){$(this).seedControls(n)}));"function"==typeof $.fn.seedFindControls&&i.find("#seed-find-controls").each((function(){$(this).seedFindControls(n)}));i.find("#map-controls").mapControls(n),i.find("#map-canvas").chunkMap(n),e(),n.triggerHandler("uiloaded"),setTimeout((e=>window._enableAnalytics=!0),5e3)}}function i(){$("#app").html("This app is not supported by your browser. Please make sure your browser is up to date and try again."),e()}var t={errorInit:function(){$("#app").html("There was an error loading the app. Please try again later"),window.gtag&&window.gtag("event","CB_ChunkApp_InitError"),e()},init:function(e,t){var o=!!Modernizr.canvas,r=!!Modernizr.canvastext,a=!!Modernizr.webworkers,s=!!window.Promise,l=!!function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}();!t&&o&&s&&r&&a&&l?n(e):(i(),window.gtag&&window.gtag("event","CB_ChunkApp_BrowserTestFailure",{missing:[t&&"app-support",!o&&"canvas",!r&&"canvastext",!a&&"workers",!l&&"wasm",!s&&"promise"].filter(Boolean).join(",")}))}};return t}();function SeedMapTiles(e,n){function i(e){return{showBiomes:-1!==e.indexOf("biomes"),pois:e.filter((function(e){return"biomes"!==e&&"checkAll"!==e&&"unCheckAll"!==e}))}}var t="CHUNK_ASYNC_TILE_LOAD_ERROR",o=0,r=n.nrParallel,a=function(){function a(i,t){g.clear(),n.onParamsChanged(i,t),e.triggerHandler("paramschanged"),e.getHoverText&&e.getHoverText.clear(),C=[],h=[],f={},m={}}function s(){for(;r>w&&C.length>0;)l(C.shift())}function l(e){e.beforeLoad()?(w+=1,n.loadTile(e.params,e.tile,(function(n){w-=1,setTimeout(s,0),e.cb(n)}))):s()}function c(e,i,t,r){var a=d(e);g.has(a)?r(null,g.get(a)):f[a]?(f[a]=r,m[a]=t):(f[a]=r,m[a]=t,function(e,n,i){C.push({params:p,tile:e,beforeLoad:n,cb:i}),1>w&&s()}(e,(function(){return!!m[a]&&(!m[a]()||(delete m[a],delete f[a],!1))}),(function(t){if(!i()){var r=null;f[a]&&(r=f[a],delete f[a],delete m[a]);var s=t&&{tile:e,hits:t.error?t:n.processTile(t,e)};if(g.set(a,s),s.hits.error&&(h.push(a),window.gtag&&5>o)){var l=1===(o+=1)&&s.hits.errorStack&&Math.random()<.01,c=s.hits.errorStr+" ("+o+") ("+(navigator.hardwareConcurrency||0)+")";l&&(c+=" ("+s.hits.errorStack+")"),window.gtag("event","CB_ChunkApp_ChunkLoadError",{errorMsg:c})}r&&r(s)}})))}function d(e){return e.x+"-"+e.z}function u(e,n,i,t,o){var r=function(e,n,i,t){for(var o=p.tileSize,r=p.tileScale,a=Math.floor(e/o),s=Math.floor(n/o),l=Math.floor((e+i+1)/o),c=Math.floor((n+t+1)/o),d=[],u=s;c>=u;u++)for(var g=a;l>=g;g++)d.push({x:g*o,z:u*o,xL:o,zL:o,scale:r});return d}(e,n,i,t),a=[],s=[];return r.forEach((function(e){var n=d(e);g.has(n)?s.push(g.get(n)):a.push(e)})),[s,a]}var g=new QuickLRU({maxSize:2048}),h=[],f={},m={},p=Object.assign({seed:"0",platform:n.defaultPlatform,tileSize:8,tileScale:1,biomeFilter:null,dimension:e.initialDimension,pois:[],showBiomes:!1,biomeHeight:e.initialBiomeHeight,showHeights:!1,hidePoi:!0},i(e.initialPois)),v=null;if(n.getHoverText){var b=function(e){return p.tileScale>=1?e:Math.floor(e/p.tileScale)*p.tileScale};e.getHoverText=memoizeQuickLRU((function(e){var i=b(e.chunkX),t=b(e.chunkZ),o=d(function(e,n){var i=p.tileSize,t=p.tileScale;return{x:Math.floor(e/i)*i,z:Math.floor(n/i)*i,xL:i,zL:i,scale:t}}(i,t)),r=g.get(o);return r?n.getHoverText(i,t,r,p):void 0}),{maxSize:100,hash:function(e){return b(e.chunkX)+" "+b(e.chunkZ)}})}e.onCanvasClick=function(e,i){n.onCanvasClick&&n.onCanvasClick(e,i,p)},e.isClickable=n.isClickable;var C=[],w=0;s();var B=$('<span>Failed to load region. <button style="text-decoration: underline" class="retry-now unstyled-button">Try again</button></span>');return B.find(".retry-now").click((function(){h.forEach((function(e){g.delete(e)})),h=[],e.getHoverText&&e.getHoverText.clear(),e.triggerHandler("hideerror",[t]),e.triggerHandler("redrawmap",[])})),{getParams:function(){return p},setParams:function(e){var n=Object.keys(e).filter((function(n){return p[n]!==e[n]}));n.length<1||a(p=Object.assign({},p,e),n)},flushCache:function(){g.clear()},getRenderer:function(i,o,r,a,s,l){var d=!1,g=!1;function h(){return f!==p}v&&v.onCancel();var f=p,m={hasNext:function(){return!d},renderNextAsync:function(f,m,v,b,C,w,k,S){function y(i,o){var r=l(i.tile.x,i.tile.z);if(i.hits.error){if(!m(r[0],r[1],i.tile.xL*s,i.tile.zL*s,!0,!0))return;e.triggerHandler("showerror",[t,B,!1,"error",!0])}else{if(!m(r[0],r[1],i.tile.xL*s,i.tile.zL*s,!0,!1))return;n.paintTile(f,o,i.tile,i.hits,b,s,l,S,p)}}function x(e){n.beforeMapRepaint(),e.forEach((function(e){y(e,"biomes")})),C(),e.forEach((function(e){y(e,"slimeChunks")})),e.forEach((function(e){y(e,"pois")})),w(),n.onMapRepainted(p)}if(d)throw new Error;d=!0;var M=u(i,o,r,a),L=M[0],T=M[1];x(L);var A=0;T.length<1&&v(),T.forEach((function(e){A++,c(e,h,(function(){return h()||g}),(function(e){(A--,e&&!g)&&(k(),x(u(i,o,r,a)[0]));1>A&&v()}))}))},onCancel:function(){g=!0}};return v=m,m}}}();return SeedMapTiles.getParams=function(){return JSON.parse(JSON.stringify(a.getParams()))},e.getRenderer=a.getRenderer,e.on("seedchange",(function(n,i,t,o){a.setParams({seed:i.toString()}),e.trigger("seedapply",[i,t,o])})),e.on("platformchange",(function(e,n){a.setParams({platform:n})})),e.on("biomefilterchanged",(function(n,i){a.setParams({biomeFilter:i}),e.triggerHandler("redrawmap")})),e.on("applydimensionchanged",(function(n,i){a.setParams({dimension:i}),e.triggerHandler("redrawmap")})),e.on("poischanged",(function(n,t){var o=i(t.pois);a.setParams(o),e.triggerHandler("redrawmap")})),e.on("applycustomizepoi",(function(){e.triggerHandler("redrawmap")})),e.on("biomeheightchanged",(function(n,i){a.setParams({biomeHeight:i}),e.triggerHandler("redrawmap")})),e.on("showheightschanged",(function(n,i){a.setParams({showHeights:i}),e.triggerHandler("redrawmap")})),e.on("hidepoichanged",(function(n,i){a.setParams({hidePoi:i.checkbox}),i.select&&e.triggerHandler("redrawmap")})),e.on("mapDrawingStarted",(function(e,n){var i=SeedMapTiles.calcTileParams(n.chunkWidth),t=i.size,o=i.scale;a.setParams({tileSize:t,tileScale:o})})),e.on("mapdimensionschanged",(function(e,i){n.onMapDimensionsChanged(i[0],i[1])})),e.on("selectmodechanged",(function(e,i){n.setSelectMode(i),HTSelectManager.clearSelection()})),e.on("canvasinit",(function(e,i){n.init(i,a.getParams())})),e}$.fn.seedControls=function(e){var n={error:"错误",fileError:"从level.dat中抓取种子失败, 请检查level.dat有效性并重试",info:"信息",warning:"警告",noSupport:"因浏览器限制，以下功能无法使用",noDragAndDrop:"拖动并放置",noFileRead:"从世界存档加载种子"},i={seed:this.find("#seed"),randomButton:this.find("#seed-random"),file:this.find("#seed-file"),dropbox:this.find("#seed-dropbox"),platformSelect:this.find("select#platform"),errors:this.find("#seed-errors"),fileError:$('<div class="alert alert-error"><button class="close" data-dismiss="alert">×</button><strong>'+n.error+"!</strong> "+n.fileError+"</div>")},t={maybeSetPlatform:function(e){return-1!==i.platformSelect.find("option").map((function(e,n){return $(n).val()})).get().indexOf(e)&&(i.platformSelect.val(e),a.platformChanged(),!0)},ensureEdition:function(e){var n=ChunkApp.Platform[i.platformSelect.val()],o=n&&n.cb3World&&n.cb3World.edition;if(o&&o!==e){var r=i.platformSelect.find("option").map((function(e,n){return $(n).val()})).get(),a=r.find((function(n){var i=ChunkApp.Platform[n],t=i&&i.cb3World&&i.cb3World.edition;return t&&t===e}));a&&t.maybeSetPlatform(a)}},cleanSeed:function(e){var n;return e.length<1?n=t.getSeedFromLong(o):void 0===(n=appHelpers.toLong(e))&&(n=e.hashCode()),n.toString()},cleanSeedString:function(e){return e.substr(0,32)},getRandomSeed:function(){var e=this.getRandomLong();return this.getSeedFromLong(e)},getRandomLong:function(){var e=Math.floor(Math.random()*Math.pow(2,32)),n=Math.floor(Math.random()*Math.pow(2,32));return CB3Libs.Long.fromBits(e,n)},getSeedFromLong:function(e){var n=ChunkApp.Platform[i.platformSelect.val()];return n&&n.use32BitSeed?e.toInt()+"":e.toString()},removeZero:function(e){return e.replace(/^[0]+/g,"")},parseFiles:function(e){e.size<1?r.showFileError():Array.from(e).forEach((function(e){t.addFile(e)}))},addFile:function(e){window.gtag&&window._enableAnalytics&&window.gtag("event","CB_ChunkApp_SaveFileLoaded"),loadMinecraftSave(e,(function(e,n){if(!e){var i=n.getSeed(),o=n.getLevelName();return null==i||i.toString().length>=100||null==o||o.toString().length>=100?void r.showFileError():(r.setSeed(i),void t.ensureEdition(n.isBedrock?CB3Libs.Edition.Bedrock:CB3Libs.Edition.Java))}r.showFileError()}))}},o=t.getRandomLong(),r={refreshSeedAndPlatform:function(){var e,n=document.location.hash;void 0!==n&&n.length>1&&(e=n.substr(1));var i=null,o=null;try{i=window.localStorage.getItem("cb_finder_lastseed")}catch(e){}try{o=window.localStorage.getItem("cb_finder_lastplatform")}catch(e){}var a=o,s=e||i;return a&&t.maybeSetPlatform(a),!!s&&(r.setSeed(s),!0)},getSeed:function(){return i.seed.val()},setSeed:function(e,n,t){i.seed.val(e),n||a.seedSubmit(!1,t)},showFileError:function(){i.fileError.prependTo(i.errors)},showDropbox:function(e){i.dropbox.fadeIn(e),$(document).one("click",r.hideDropbox)},hideDropbox:function(e){"number"!=typeof e&&(e=0),i.dropbox.fadeOut(e)}},a={seedChanged:__CB__debounce((function(){a.seedSubmit(!0)}),500),seedBlurred:function(){a.seedSubmit()},platformChanged:function(){var n=i.platformSelect.val();0===n.indexOf("platform-")&&(n=n.substr("platform-".length));var t=ChunkApp.Platform[n];try{window.localStorage.setItem("cb_finder_lastplatform",n)}catch(e){}t.warning?l.showError(null,"platform-warning",t.warning,!1,"warning",!1):l.hideError(null,"platform-warning"),e.triggerHandler("platformchange",t)},randomButton:function(){r.setSeed(t.getRandomSeed(),!1,!0)},openFileDialog:function(){i.file.removeClass("hidden").focus().click().addClass("hidden")},fileSelected:function(e){t.parseFiles(e.target.files)},hashChanged:function(){var e=window.location.hash;r.setSeed(e.substr(1)),setTimeout((function(){i.seed.change(),a.seedSubmit()}),0)},dnd:{dragEnter:function(){r.showDropbox(125)},dragLeave:function(e){((e=e.originalEvent).pageX<10||e.pageY<10||$(window).width()-e.pageX<10||$(window).height-e.pageY<10)&&r.hideDropbox(125)},drop:function(e){(e=e.originalEvent).stopPropagation&&e.stopPropagation(),e.preventDefault(),r.hideDropbox(0);var n=e.dataTransfer.files;return void 0!==n&&0!=n.length?(t.parseFiles(n),!1):void 0}},seedSubmit:function(n){var i=t.cleanSeedString(r.getSeed()),o=t.cleanSeed(i);r.setSeed(i,!0);var a=CB3Libs.Long.fromString(o);!n&&$.trim(i).length>0&&window.location.hash!=="#"+i&&window.history.replaceState(null,null,"#"+i),n||0!==$.trim(i).length||""===window.location.hash||"#"===window.location.hash||window.history.replaceState(null,null,window.location.pathname);try{window.localStorage.setItem("cb_finder_lastseed",i)}catch(e){}(i.length<1||a.toString()===i||void 0!==appHelpers.toLong(i))&&(i=void 0),e.triggerHandler("seedchangeui",[a,i])}},s={},l={showError:function(e,t,o,r,a,c){if(r&&c)throw new Error;if(!c||!s[t]){a=a||"error",l.hideError(e,t);var d=$('<div id="chunkapp-error-'+t+'" class="alert alert-'+a+'">'+(r?'<button class="close" data-dismiss="alert">×</button>':"")+"<strong>"+n[a]+'!</strong> <span class="message"></span></div>');d.find(".message").replaceWith(o),d.prependTo(i.errors),s[t]=!0}},hideError:function(e,n){s[n]=!1,i.errors.find("#chunkapp-error-"+n).detach()}},c=Modernizr.draganddrop,d=!!window.FileReader;if(i.randomButton.click(a.randomButton),$(window).hashchange(a.hashChanged),d&&(c&&(this.find("#seed-dragdrop-hint").removeClass("hidden"),$("body").bind("dragenter",a.dnd.dragEnter),i.dropbox.bind("dragleave",a.dnd.dragLeave).bind("dragover",!1).bind("drop",a.dnd.drop).hide().removeClass("hidden")),this.find("#seed-load").removeClass("hidden").click(a.openFileDialog),i.file.change(a.fileSelected)),!d||!c){var u='<div class="alert"><button class="close" data-dismiss="alert">×</button><strong>'+n.info+"!</strong> "+n.noSupport+": ",g=new Array;d?c||g.push(n.noDragAndDrop):g.push(n.noFileRead),u+=g.join(", ")+"</div>",$(u).appendTo(i.errors)}i.seed.keypress((function(e){13===e.which&&(e.preventDefault(),a.seedSubmit())})),e.on("uiloaded",(function(){setTimeout((function(){var t;t=r.refreshSeedAndPlatform(),a.seedSubmit(!t),i.seed.change(),i.platformSelect.change(),"object"==typeof e.errors&&$.each(e.errors,(function(e,t){$('<div class="alert alert-error"><button class="close" data-dismiss="alert">×</button><strong>'+n.error+"!</strong> </div>").append(document.createTextNode(t)).prependTo(i.errors)})),"object"==typeof e.warnings&&$.each(e.warnings,(function(e,t){$('<div class="alert"><button class="close" data-dismiss="alert">×</button><strong>'+n.info+"!</strong> "+t+"</div>").prependTo(i.errors)}))}))})),i.seed.change(a.seedChanged).keyup(a.seedChanged),i.seed.blur(a.seedBlurred),i.platformSelect.change(a.platformChanged),e.on("showerror",l.showError),e.on("hideerror",l.hideError),e.triggerHandler("seedControlsInitialized",this)},$.fn.mapControls=function(e){var n={slider:$("body").find("#map-zoom-slider"),gotoX:$("body").find("#map-goto-x"),gotoZ:$("body").find("#map-goto-z"),gotoButton:$("body").find("#map-goto-go"),touchEnabled:$("body").find("#map-touch-enabled"),gridLines:$("body").find("#show-grid-lines")},i=function(e){e.addClass("errorflash"),setTimeout((function(){e.removeClass("errorflash")}),1500)},t=function(){e.triggerHandler("touchset",n.touchEnabled.is(":checked"))},o=function(t,o){window.gtag&&window._enableAnalytics&&window.gtag("event","CB_ChunkApp_GoTo"),o=!0===o;var r=n.gotoX.val(),a=n.gotoZ.val(),s=!1,l=!1;if(r=appHelpers.toLong(r),a=appHelpers.toLong(a),void 0!==r){var c=r.toNumber();(c>34359738352||-34359738368>c)&&(s=!0)}else s=!0;if(void 0!==a){var d=a.toNumber();(d>34359738352||-34359738368>d)&&(l=!0)}else l=!0;s&&!o&&i(n.gotoX),l&&!o&&i(n.gotoZ),s||l||e.triggerHandler("goto",[r,a])},r=function(e){13===e.keyCode&&n.gotoButton.click()},a=function(){window.gtag&&window._enableAnalytics&&window.gtag("event","CB_ChunkApp_SaveMap"),e.triggerHandler("saverequest")},s=function(){e.triggerHandler("gridlineschange",n.gridLines.is(":checked"))},l=function(e,i,t){n.slider.slider("value",[100*t])},c=function(e,i,t){n.gotoX.val(i.toString()),n.gotoZ.val(t.toString())},d=function(e,i){n.touchEnabled.prop("checked",!!i)};n.gotoButton.click(o),n.gotoX.add(n.gotoZ).on("keypress",r),n.gridLines.change(s),this.find("#map-save").on("click",a),e.on("zoomchange",l),e.on("pinset",c),n.gridLines.prop("checked",!e.initialHideGridLines),this.find("a").filter((function(){return void 0!==$(this).data("scrollto")})).each((function(){var e=$(this);e.click((function(){return $(e.data("scrollto")).ScrollTo(),!1}))})),"undefined"!=typeof Hammer&&isTouch()&&(n.touchEnabled.change(t),e.on("touchchange",d),n.touchEnabled.prop("checked",!0),this.find("#map-touch").removeClass("hidden")),setTimeout((function(){n.gotoButton.trigger("click",!0)}),0)},$.fn.chunkMap=function(e){function n(){window._enableAnalytics&&window.gtag&&B&&(window.gtag("event","CB_ChunkApp_Usage",{platform:Object.keys(ChunkApp.Platform).find((function(e){return ChunkApp.Platform[e]===u}))||"N/A",finder:window.CB3FinderAppName||"N/A",dimension:window.__analytics_dimension||"N/A",zoom:Math.pow(2,Math.floor(Math.log2(k.chunkWidth))),biomeFilterCount:window.__analytics_biomeFilter?window.__analytics_biomeFilter.length:"N/A",poisCount:__analytics_lastPois?__analytics_lastPois.length:"-1",pois:__analytics_lastPois&&CB3PoiConfig?__analytics_lastPois.map((function(e){return CB3PoiConfig[e].gaId})).concat(__analytics_lastBiomes?["Bi"]:[]).join(""):"",biomeRequests:window.__analytics_biomeRequests?window.__analytics_biomeRequests:0}),B=!1)}function i(n){var i=document.body.clientWidth,c=document.documentElement.clientHeight||document.body.clientHeight,d=i;15,32,15,55;var u=d-15-15,g=Math.floor(.7*u)+32+55;g=Math.min(540,g),d=i,g=c-p.canvas.offsetTop-68,p.canvas.width=d,p.canvas.height=g,p.imageSmoothingEnabled=!1,p.mozImageSmoothingEnabled=!1,p.webkitImageSmoothingEnabled=!1,p.msImageSmoothingEnabled=!1,r=(t=d)-15,a=(o=g)-55,s=15,l=32,n&&x.setCenter(CB3Libs.Long.ZERO,CB3Libs.Long.ZERO),e.triggerHandler("mapdimensionschanged",[[d,g]]),y.redraw()}var t,o,r,a,s,l,c=this,d=$("body"),u=ChunkApp.Platform.java,g=!e.initialHideSecondary,h=!e.initialHideGridLines,f=!1,m=1,p=c.get(0).getContext("2d");p.imageSmoothingEnabled=!1,p.mozImageSmoothingEnabled=!1,p.webkitImageSmoothingEnabled=!1,p.msImageSmoothingEnabled=!1,e.loadingBackground&&c.css("background-color","rgb("+e.loadingBackground+")");var v="加载中...",b="到",C="从",w="版本",B=!1;setTimeout((function(){B=!0}),9e4);var k={seed:CB3Libs.Long.ZERO,seedString:void 0,chunkWidth:.5,distantView:!1,startX:-6,startZ:-4,intervalFactor:50,interval:10,gridStartX:s,gridEndX:r+1,gridStartY:l,gridEndY:a+1,pin:void 0,selectMode:!1},S={setSeed:function(e,n,i){k.seed.equals(e)||(k.seed=e,k.seedString=n,k.seedDisplay=i)},limitInt32:function(e){return e>2147483647?2147483647:-2147483648>e?-2147483648:e},clamp:function(e,n,i){return e>i?i:n>e?n:e},nearInteger:function(e){var n=e%1;return-.999>n||n>0&&.001>n?Math.floor(e):n>.999||0>n&&n>-.001?Math.ceil(e):e},formatNr:function(e){return(e+="").replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}},y=function(){var i,d=0,m="#332B28",B=!1,y=e.drawAll,x={formatNr:S.formatNr,chunkXToScreen:function(e){return s+Math.round((e-k.startX)*k.chunkWidth)},chunkZToScreen:function(e){return l+Math.round((e-k.startZ)*k.chunkWidth)},getFirstChunkX:function(){return Math.floor(k.startX)},getFirstChunkZ:function(){return Math.floor(k.startZ)},getFirstChunkXToFill:function(){var e=x.getFirstChunkX(),n=e+1,i=x.chunkXToScreen(e);return 3>x.chunkXToScreen(n)-(i=Math.max(i,s))?n:e},getFirstChunkZToFill:function(){var e=x.getFirstChunkZ(),n=e+1,i=x.chunkZToScreen(e);return 3>x.chunkZToScreen(n)-(i=Math.max(i,l))?n:e},getLastChunkXToFill:function(){var e=x.getFirstChunkXToFill();return e+Math.floor((r-x.chunkXToScreen(e))/k.chunkWidth)},getLastChunkZToFill:function(){var e=x.getFirstChunkZToFill();return e+Math.floor((a-x.chunkZToScreen(e))/k.chunkWidth)},getScreenFirstX:function(){return(Math.floor(k.startX)-k.startX)*k.chunkWidth+s},getScreenFirstY:function(){return(Math.floor(k.startZ)-k.startZ)*k.chunkWidth+l},getInScreenFirstX:function(e){for(var n=x.getScreenFirstX();s-(e?1:0)>=n;)n+=k.chunkWidth;return n},getInScreenFirstY:function(e){for(var n=x.getScreenFirstY();l-(e?1:0)>=n;)n+=k.chunkWidth;return n},getInScreenFirstX16:function(e){var n=k.interval;return n=((n=Math.ceil(k.startX/n)*n)-k.startX)*k.chunkWidth+s},getInScreenFirstY16:function(e){var n=k.interval;return n=((n=Math.ceil(k.startZ/n)*n)-k.startZ)*k.chunkWidth+l},getInScreenFirstRegionX:function(e){for(var n=x.getScreenFirstX(),i=Math.floor(k.startX);s-(e?1:0)>=n||i%32!=0;)n+=k.chunkWidth,i+=1;return n},getInScreenFirstRegionY:function(e){for(var n=x.getScreenFirstY(),i=Math.floor(k.startZ);l-(e?1:0)>=n||i%32!=0;)n+=k.chunkWidth,i+=1;return n},getInScreenFirstRegionX16:function(e){for(var n=x.getScreenFirstX(),i=Math.floor(k.startX);s-(e?1:0)>=n||i%32!=0;)n+=k.chunkWidth,i+=1;return n},getInScreenFirstRegionY16:function(e){for(var n=x.getScreenFirstY(),i=Math.floor(k.startZ);l-(e?1:0)>=n||i%32!=0;)n+=k.chunkWidth,i+=1;return n},getFirstCoordinateX:function(){return 16*Math.ceil(k.startX)},getFirstCoordinateX16:function(){var e=k.interval;return 16*(e=Math.ceil(k.startX/e)*e)},getLastCoordinateX:function(){for(var e=x.getFirstCoordinateX(),n=x.getInScreenFirstX(!0);r>=n;)n+=k.chunkWidth,e+=16;return e-16},getFirstCoordinateZ:function(){return 16*Math.ceil(k.startZ)},getFirstCoordinateZ16:function(){var e=k.interval;return 16*(e=Math.ceil(k.startZ/e)*e)},getLastCoordinateZ:function(){for(var e=x.getFirstCoordinateZ(),n=x.getInScreenFirstY(!0);a>=n;)n+=k.chunkWidth,e+=16;return e-16}},M=function(){var n=0,t=0,o=0,d=0,h=0,b=0,C=0,w=0,B=0,S=0,M=[],P=!1,I=0,z=0,W=0,F=e.secondaryRange||0,V=null,j={};function X(n,i,t,o){if(Z(n,i)){var c=e.primaryColorRGB,d=e.secondaryColorRGB;"string"==typeof o&&(c=o,d=o);var u=x.chunkXToScreen(n)+1,g=x.chunkZToScreen(i)+1,h=Math.min(x.chunkXToScreen(n+1)-1,r+1),f=Math.min(x.chunkZToScreen(i+1)-1,a+1);u=Math.max(u,s+2),g=Math.max(g,l+2),p.fillStyle=t?"rgb("+c+")":"rgba("+d+","+t+")",L(),k.distantView?(p.beginPath(),p.arc((u+h)/2,(g+f)/2,4,0,2*Math.PI,!1),p.fill()):p.fillRect(u,g,h-u,f-g)}}function Z(e,n){return e>=o&&n>=d&&h>=e&&b>=n}function R(e,n){return(e-=o)*(b-d+1)+(n-=d)}function N(e,n){if(Z(e,n)){var i=R(e,n);M[i]=1}}function Y(e,n){if(!Z(e,n))return!1;var i=R(e,n);return 1===M[i]}function _(i,o,a,s){function l(){(!e.async||1>W&&!1===P)&&(e.drawChunkBordersPostRender||O(),T(),D(),s||(J.clearFooter(),H(),T(),p.fillStyle=m,p.fillRect(r-55,0,60,32),L(),f&&(c.attr("aria-busy","false"),f=!1)))}if(void 0!==i){if(i.source!=window||"drawChunks"!=i.data)return;i.stopPropagation()}void 0===o&&(o=10),a=!0===a,I=(new Date).getTime();for(var d=z;(new Date).getTime()-I<o||a;){if(!V.hasNext())return P=!1,void l();if(e.async)W++,V.renderNextAsync(p,(function(n,i,t,o,r,a){if(z!==d)return!1;if(L(),a)p.fillStyle="#f0cccc",p.fillRect(n,i,t,o);else if(r&&e.loadingBackground){var s=p.globalCompositeOperation;p.globalCompositeOperation="destination-over",p.fillStyle="#332B28",p.fillRect(n,i,t,o),p.globalCompositeOperation=s}return!0}),(function(){W--,z===d&&l()}),(function(e,n,i){z===d&&X(e,n,1,i)}),(function(){O(),D()}),(function(){E()}),(function(){L(),A()}),[k.gridStartX+2,k.gridStartY+2,k.gridEndX,k.gridEndY]);else{var h=e.checkChunk(k.seed,n,t,u);if(h){if(X(n,t,1,h),g&&F>0){N(n,t);var v=e.getSurroundings(n,t);if(void 0!==v)for(var b=0;b<v.length;b++){var C=v[b];Y(C.x,C.z)||C.p>0&&X(C.x,C.z,C.p)}}}else e.loadingBackground&&X(n,t,1,"208,227,240");n++}}window.postMessage("drawChunks","*")}return j.mapChanged=function(a){if(void 0!==k.seed){e.triggerHandler("mapDrawingStarted",[k,u]);var s=!0===a||y;if(z=z+1|0,W=0,o=x.getFirstChunkXToFill(),d=x.getFirstChunkZToFill(),h=x.getLastChunkXToFill(),b=x.getLastChunkZToFill(),void 0!==u.boundaries&&(o=Math.max(o,u.boundaries.minX),d=Math.max(d,u.boundaries.minZ),h=Math.min(h,u.boundaries.maxX),b=Math.min(b,u.boundaries.maxZ)),B=h+F,S=b+F,n=C=o-F,t=w=d-F,M=[],V=null,V=e.getRenderer(C,w,B-C,S-w,k.chunkWidth,(function(e,n){return[x.chunkXToScreen(e)+1,x.chunkZToScreen(n)+1]})),a||(T(),p.font="12px sans-serif",p.textAlign="end",p.textBaseline="middle",p.fillStyle="white",p.fillText(v,r-5,16),L(),f||(c.attr("aria-busy","true"),f=!0)),!P||s){P=!0;var l=(new Date).getTime()-i;10>l||s?_(void 0,90-l,s,a):window.postMessage("drawChunks","*")}}},window.addEventListener?window.addEventListener("message",_,!0):y=!0,j}();function L(){B||(B=!0,p.save(),p.beginPath(),p.rect(k.gridStartX+2,k.gridStartY+2,k.gridEndX-k.gridStartX-5,k.gridEndY-k.gridStartY-4),p.clip())}function T(){B&&(B=!1,p.restore())}function A(){V=!1,p.fillStyle=m,p.fillRect(0,0,t,o),e.loadingBackground&&(L(),p.fillStyle=m,p.fillRect(s,l,r-s,a-l),T())}function P(e,n,i,t,o){var c,d;for(p.strokeStyle=e,p.lineWidth=n,p.beginPath(),c=i;r+.5>=c;)p.moveTo(Math.round(c)+.5,Math.round(l)+2),p.lineTo(Math.round(c)+.5,Math.round(a)+1),c+=o;for(p.stroke(),p.beginPath(),d=t;a+.5>=d;)p.moveTo(Math.round(s)+2,Math.round(d)+.5),p.lineTo(Math.round(r)+1,Math.round(d)+.5),d+=o;p.stroke()}function O(){if(h){var e=k.chunkWidth,n=k.interval;k.distantView||P("#888",1,x.getInScreenFirstX16(!1)-n*e,x.getInScreenFirstY16(!1)-n*e,e),P("#88C",k.distantView?1:2,x.getInScreenFirstX16(!0)-n*e,x.getInScreenFirstY16(!0)-n*e,n*e)}}function E(){var n,i,t=s+.5,o=l+.5,c=k.interval;p.strokeStyle=k.selectMode?"#0F0":"#444",p.lineWidth="2",p.beginPath(),p.moveTo(t,a+1),p.lineTo(t,o),p.lineTo(r,o),p.lineTo(r,a+1),p.lineTo(t,a+1),p.stroke(),p.font="10px sans-serif",n=x.getInScreenFirstX16(!0),i=l+16,p.textAlign="center",p.textBaseline="alphabetic",p.fillStyle="white",L();for(var d=x.getFirstCoordinateX16();r>=n;)p.fillText(x.formatNr(d.toFixed(0)),n,i),n+=k.chunkWidth*c,d+=16*c;if(n=s+4,i=x.getInScreenFirstY16(!0),p.textAlign="start",d=x.getFirstCoordinateZ16(),a>=i)for(p.textBaseline="middle",i>l+28&&p.fillText(x.formatNr(d.toFixed(0)),n,i),i+=c*k.chunkWidth,d+=16*c;a>=i;)p.fillText(x.formatNr(d.toFixed(0)),n,i),i+=c*k.chunkWidth,d+=16*c;p.drawImage(e.compassImage,r-45,a-55),T()}function I(){var n;p.textAlign="start",p.font="11px sans-serif",p.fillStyle="white",n=s;var i=", "+w+" "+u.label,t=k.seedDisplay||k.seed;"string"==typeof e.header?p.fillText(e.header,n,19):void 0===k.seedString?p.fillText("种子: "+t.toString()+i,n,19):(p.fillText("种子: ",n,19),p.font="10px sans-serif",p.fillText(k.seedString+i,n+35,11),p.fillText(t.toString(),n+35,27))}function z(e,n,i,t,o){V=!0,p.font="11px sans-serif",p.textAlign="end",p.fillStyle="white";var s=r-5,l=a+15;p.fillText(`X: ${x.formatNr(e.toFixed(1))}  Z: ${x.formatNr(n.toFixed(1))}`,s,l),l+=14,p.fillText(`区块 (${x.formatNr(Math.floor(i/16))} / ${x.formatNr(Math.floor(t/16))} ${C} (${x.formatNr(i)} / ${x.formatNr(t)} ) ${b} (${x.formatNr(i+15)} / ${x.formatNr(t+15)})`,s,l),l+=14,o&&(p.font="11px sans-serif",p.fillText(o,s,l))}function D(){if(J.pinRect=void 0,void 0!==k.pin){var e=k.pin,n=s+(e[0]-k.startX)*k.chunkWidth;s>n||n>r||(d=l+(e[1]-k.startZ)*k.chunkWidth,l>d||d>a||(J.pinRect=[Math.floor(n)-3,Math.floor(d)-3,6,6],p.fillStyle="rgb(255,255,255)",p.beginPath(),p.moveTo(0,0),p.arc(n,d,7,0,2*Math.PI,!0),p.closePath(),p.fill(),p.fillStyle="rgb(255,0,0)",p.beginPath(),p.moveTo(0,0),p.arc(n,d,5,0,2*Math.PI,!0),p.closePath(),p.fill()))}}function H(){if(!V&&void 0!==k.pin){var n=k.pin[0],i=k.pin[1],t=16*n,o=16*i,r=null;e.getHoverText&&(r=e.getHoverText({x:Math.floor(t),z:Math.floor(o),chunkX:n,chunkZ:i,platform:u})),z(t,o,16*Math.floor(n),16*Math.floor(i),r)}}function W(){null!==j&&clearTimeout(j),j=setTimeout(H,800)}function F(){if(void 0===u.boundaries)return k.gridStartX=s,k.gridStartY=l,k.gridEndX=r+1,void(k.gridEndY=a+1);var e=x.getInScreenFirstX(!0),n=Math.ceil(k.startX),i=n+Math.floor((r-x.getScreenFirstX())/k.chunkWidth),t=u.boundaries.minX,o=u.boundaries.maxX;t+1>i||n-1>o?(k.gridStartX=s,k.gridEndX=s):(k.gridStartX=t>=n?e+k.chunkWidth*(t-n)-2:s,k.gridEndX=i>=o?e+k.chunkWidth*(o-n)+1:r+1);var c=x.getInScreenFirstY(!0),d=Math.ceil(k.startZ),g=d+Math.floor((a-x.getScreenFirstY())/k.chunkWidth),h=u.boundaries.minZ,f=u.boundaries.maxZ;h+1>g||d-1>f?(k.gridStartY=l,k.gridEndY=l):(k.gridStartY=h>=d?c+k.chunkWidth*(h-d)-2:l,k.gridEndY=g>=f?c+k.chunkWidth*(f-d)+1:a+1)}var V=!1,j=null,J={pinRect:void 0,initialDraw:function(){J.redraw()},clearFooter:function(){V=!1,p.fillStyle=m,p.fillRect(0,a+2,r,o-a-1),W()},redrawFooter:function(e,n,i,t,o){T(),J.clearFooter(),z(e,n,i,t,o)},setXBoundaries:function(){},clearAll:function(){p.fillStyle=m,p.fillRect(0,0,t,o)},redraw:function(){n(),i=(new Date).getTime(),F(),T(),A(),I(),E(),L(),O(),M.mapChanged(!1),T(),D(),W()},drawImage:function(){F(),T(),A(),I(),E(),L(),O(),M.mapChanged(!0),T(),D(),H()}};return J}(),x={setX:function(e){e!==k.startX&&(e=S.limitInt32(e),e=S.clamp(e,-25e5,25e5),e=S.nearInteger(e),k.startX=e)},setZ:function(e){e!==k.startZ&&(e=S.limitInt32(e),e=S.clamp(e,-25e5,25e5),e=S.nearInteger(e),k.startZ=e,y.setXBoundaries())},getChunkFromCoords:function(e,n){return[(e.toNumber()+.5)/16,(n.toNumber()+.5)/16]},getChunkFromScreen:function(e,n){return x.isInsideMap(e,n)?(e=(e-s)/k.chunkWidth+k.startX,e=(Math.floor(16*e)+.5)/16,n=(n-l)/k.chunkWidth+k.startZ,[e,n=(Math.floor(16*n)+.5)/16]):void 0},getCoordsFromScreen:function(e,n){return x.isInsideMap(e,n)?(e=(e-s)/k.chunkWidth+k.startX,e=Math.floor(160*e+.5)/10,n=(n-l)/k.chunkWidth+k.startZ,[e,n=Math.floor(160*n+.5)/10]):void 0},setCenter:function(e,n){var i=x.getChunkFromCoords(e,n),t=(r-s)/k.chunkWidth/2,o=(a-l)/k.chunkWidth/2;x.setX(i[0]-t),x.setZ(i[1]-o)},_setCenterRaw:function(e,n){const i=[e/16,n/16];var t=(r-s)/k.chunkWidth/2,o=(a-l)/k.chunkWidth/2;x.setX(i[0]-t),x.setZ(i[1]-o)},getCenter:function(){var e=(r-s)/k.chunkWidth/2,n=(a-l)/k.chunkWidth/2;return[16*(k.startX+e),16*(k.startZ+n)]},scaleCenter:function(e){var n=x.getCenter();x._setCenterRaw(CB3Libs.Long.fromNumber(n[0]*e),CB3Libs.Long.fromNumber(n[1]*e))},moveY:function(e){if(!(1>e&&e>-1)){var n=e/k.chunkWidth;x.setZ(k.startZ+n)}},moveX:function(e){if(!(1>e&&e>-1)){var n=e/k.chunkWidth;x.setX(k.startX+n)}},setPin:function(e,n){var i=x.getChunkFromCoords(e,n);k.pin=[S.clamp(i[0],-25e5,25e5),S.clamp(i[1],-25e5,25e5)]},setPinAtCanvas:function(n,i){var t=x.getChunkFromScreen(n,i);if(void 0!==t){if(void 0!==y.pinRect){var o=y.pinRect,r=o[0],a=o[0]+o[2],s=o[1],l=o[1]+o[3];if(n>=r&&a>=n&&i>=s&&l>=i)return void x.removePin()}window.gtag&&window._enableAnalytics&&window.gtag("event","CB_ChunkApp_PinSetViaInputDevice"),k.pin=t,e.triggerHandler("pinset",[Math.floor(16*k.pin[0]),Math.floor(16*k.pin[1])])}},removePin:function(){k.pin=void 0},isInsideMap:function(e,n){return e>=s&&r>e&&n>=l&&a>=n}},M={zoomFactor:1,toChunkWidth:function(e){var n=Math.pow(16,e);return n<ChunkApp.config.distantChunkWidth?Math.floor(32*n)/32:Math.floor(n)},toZoomFactor:function(e){return Math.log(e)/Math.log(16)},getMinMaxZoom:function(){var n=null!=e.minChunkWidth?e.minChunkWidth:ChunkApp.config.minChunkWidth,i=null!=e.maxChunkWidth?e.maxChunkWidth:ChunkApp.config.maxChunkWidth;return[M.toZoomFactor(n),M.toZoomFactor(i)]},setZoom:function(n,i,t){var o=M.getMinMaxZoom();t=Math.max(Math.min(t,o[1]),o[0]);var r=M.toChunkWidth(t);k.distantView=r<ChunkApp.config.distantChunkWidth;var a,c=r/k.chunkWidth;k.chunkWidth=r,a=Math.log10(1/k.chunkWidth*k.intervalFactor),k.interval=Math.ceil(a),Math.frac(a)>0&&Math.frac(a)<=.3?k.interval=2*Math.pow(10,k.interval-1):Math.frac(a)>.3&&Math.frac(a)<=.699?k.interval=5*Math.pow(10,k.interval-1):k.interval=Math.pow(10,k.interval),M.zoomFactor=t,n-=s,i-=l,x.moveX(n*c-n),x.moveY(i*c-i);var d=(t-o[0])/(o[1]-o[0]);e.triggerHandler("zoomchange",[t,d])},shiftZoom:function(e,n,i){var t=Math.pow(2,.1*i);M.setZoom(e,n,M.zoomFactor+(1-t))}},L={lastDrag:void 0,dragDistance:0,drag:function(e,n){var i=L.lastDrag;if(void 0!==i){var t=i[0]-e,o=i[1]-n;return x.moveX(t),x.moveY(o),L.lastDrag=[e,n],L.dragDistance+=Math.abs(t)+Math.abs(o),!0}return L.stop(),!1},start:function(e,n){L.lastDrag=[e,n],L.dragDistance=0,d.css("cursor","move"),d.one("mouseup",L.stop),d.on("mousemove",J.dragging),d.on("mouseleave",L.stop)},stop:function(e){d.css("cursor","auto"),d.off("mousemove",J.dragging),d.off("mouseleave",L.stop),L.lastDrag=void 0,L.dragDistance<4&&J.clicked(e)}},T=function(e,n,i,t){S.setSeed(n,i,t),y.redraw()},A=function(e,n){g=!n,y.redraw()},P=function(e,n){h=n,y.redraw()},O=function(e,n){hidePoi=n,y.redraw()},E=function(e,n){k.selectMode=n,y.redraw()},I=function(e,n,i){x.setCenter(n,i),x.setPin(n,i),y.redraw()},z=function(e,n){var i=M.getMinMaxZoom(),t=i[0]+n*(i[1]-i[0]),o=s+(r-s)/2,c=l+(a-l)/2;M.setZoom(o,c,t),y.redraw()},D=function(){function n(){window.alert("Failed to download map. Please make sure you use an up-to-date web browser")}y.drawImage();var i=c.get(0).toDataURL("image/png"),t=k.seedString||k.seed||"empty";if(t=(e.shortName||"chunkbase")+"_"+t,"download"in document.createElement("a"))try{!function(){var e=$("<a></a>");e.attr("download",t+".png"),e.attr("href",i),e.appendTo($("body")),e[0].click(),e.remove()}()}catch(e){n()}else n();y.clearAll(),y.redraw()},H=function(e,n){window.gtag&&window._enableAnalytics&&window.gtag("event","CB_ChunkApp_SetTouchEnabled",{state:n?"On":"Off"}),J.touch.touchSet(n)},W=function(e,n){window.gtag&&window._enableAnalytics&&u&&n&&u!==n&&window.gtag("event","CB_ChunkApp_ChangePlatform",{platform:Object.keys(ChunkApp.Platform).find((function(e){return ChunkApp.Platform[e]===n}))||"N/A"}),u=n,y.redraw()},F=function(n,i,t){var o=m;if(m=t,o){var r=o/t;if(1!==r){if(k.pin&&(0!==k.pin[0]||0!==k.pin[1])){var a=[k.pin[0]*r,k.pin[1]*r];k.pin=a,e.triggerHandler("pinset",[Math.floor(16*k.pin[0]),Math.floor(16*k.pin[1])])}x.scaleCenter(r),e.triggerHandler("applydimensionchanged",[i])}else e.triggerHandler("applydimensionchanged",[i])}else e.triggerHandler("applydimensionchanged",[i])},V=function(){y.redraw()},j={on:function(){$(document).on("keydown",j.handleKey)},off:function(){$(document).off("keydown",j.handleKey)},handleKey:function(e){var n=e.keyCode||e.which,i=!1;return 40==n?(j.down(),i=!0):38==n?(j.up(),i=!0):37==n?(j.left(),i=!0):39==n&&(j.right(),i=!0),i?(y.redraw(),!1):void 0},up:function(){x.moveY(-20)},down:function(){x.moveY(20)},left:function(){x.moveX(-20)},right:function(){x.moveX(20)}},J={mouseScrolled:function(e,n,i,t){if(0!==t){var o=e.pageX-this.offsetLeft,r=e.pageY-this.offsetTop;if(x.isInsideMap(o,r)){e.preventDefault();var a=k.chunkWidth;M.shiftZoom(o,r,-t),k.chunkWidth!==a&&y.redraw()}}},mouseMoved:function(n){var i=n.pageX-this.offsetLeft,t=n.pageY-this.offsetTop,o=x.getCoordsFromScreen(i,t);if(void 0!==o){var r=o[0]/16,a=o[1]/16,s=null;e.getHoverText&&(s=e.getHoverText({x:Math.floor(o[0]),z:Math.floor(o[1]),chunkX:r,chunkZ:a})),y.redrawFooter(o[0],o[1],16*Math.floor(r),16*Math.floor(a),s),e.isClickable&&(c.get(0).style.cursor=e.isClickable(i,t)?"pointer":"default")}else y.clearFooter()},mouseLeft:function(){j.off(),y.clearFooter()},mouseEntered:function(){j.on()},dragging:function(e){var n=e.pageX,i=e.pageY;L.drag(n,i)&&y.redraw()},clicked:function(n){if(e.onChunkClick){var i=n.pageX-c.offset().left,t=n.pageY-c.offset().top,o=x.getCoordsFromScreen(i,t);if(void 0===o)return;var r=Math.floor(o[0]/16),a=Math.floor(o[1]/16);e.onChunkClick(r,a)&&y.redraw()}if(e.onCanvasClick){i=n.pageX-c.offset().left,t=n.pageY-c.offset().top;e.onCanvasClick(i,t)}},dblClicked:function(e){J.setPinAtScreen(e.pageX,e.pageY,this)},mouseDown:function(e){var n=e.pageX-this.offsetLeft,i=e.pageY-this.offsetTop;x.isInsideMap(n,i)&&(e.preventDefault(),L.start(e.pageX,e.pageY))},globalMouseUp:function(){L.stop()},touch:{lastScale:1,lastDragX:0,lastDragY:0,lastDragXLeftOver:0,lastDragYLeftOver:0,enabled:!1,doubletap:function(){},touchSet:function(e){J.touch.enabled=e},drag:function(e){if(J.touch.enabled&&!(e.gesture.startEvent.touches.length>1)&&x.isInsideMap(e.gesture.startEvent.center.pageX-this.offsetLeft,e.gesture.startEvent.center.pageY-this.offsetTop)){e.gesture.preventDefault();var n=J.touch.lastDragX,i=J.touch.lastDragY,t=e.gesture.deltaX,o=e.gesture.deltaY;J.touch.lastDragX=t,J.touch.lastDragY=o,t=t-n+J.touch.lastDragXLeftOver,o=o-i+J.touch.lastDragYLeftOver;var r=Math.floor(t+.5),a=Math.floor(o+.5);J.touch.lastDragXLeftOver=t-r,J.touch.lastDragYLeftOver=o-a,0!==t&&0!==o&&(x.moveX(-r),x.moveY(-a),y.redraw())}},dragEnd:function(){J.touch.lastDragX=0,J.touch.lastDragY=0,J.touch.lastDragXLeftOver=0,J.touch.lastDragYLeftOver=0},transformEnd:function(){J.touch.enabled&&(J.touch.lastScale=1)},hold:function(e){J.touch.enabled&&J.setPinAtScreen(e.gesture.center.pageX,e.gesture.center.pageY,this)&&e.gesture.preventDefault()},pinch:function(e){if(J.touch.enabled){var n=e.gesture.center.pageX-this.offsetLeft,i=e.gesture.center.pageY-this.offsetTop;if(x.isInsideMap(n,i)){var t=k.chunkWidth,o=e.gesture.scale;M.setZoom(n,i,M.zoomFactor+(o-J.touch.lastScale)/1.5),J.touch.lastScale=o,k.chunkWidth!==t&&y.redraw()}}}},setPinAtScreen:function(e,n,i){return e-=i.offsetLeft,n-=i.offsetTop,!!x.isInsideMap(e,n)&&(x.setPinAtCanvas(e,n),y.redraw(),!0)}};if(c.on("mousewheel",J.mouseScrolled),c.mousemove(J.mouseMoved),c.dblclick(J.dblClicked),c.mousedown(J.mouseDown),c.on("mouseleave",J.mouseLeft),c.on("mouseenter",J.mouseEntered),e.on("seedapply",T),e.on("goto",I),e.on("zoomsetpercent",z),e.on("saverequest",D),e.on("platformchange",W),e.on("secondarychange",A),e.on("gridlineschange",P),e.on("selectmodechanged",E),e.on("hidepoichange",O),e.on("redrawmap",V),e.on("dimensionchanged",F),"undefined"!=typeof Hammer){Hammer(c.get(0)).on("hold",J.touch.hold).on("pinch",J.touch.pinch).on("transformend",J.touch.transformEnd).on("drag",J.touch.drag).on("dragend",J.touch.dragEnd).on("doubletap",J.touch.doubletap),c.on("doubleclick",J.touch.doubletap),e.on("touchset",H);var X=!1;c.on("touchstart",(function(e){J.touch.enabled&&(X=x.isInsideMap(e.originalEvent.touches[0].pageX-this.offsetLeft,e.originalEvent.touches[0].pageY-this.offsetTop))})),c.on("touchmove",(e=>J.touch.enabled&&X&&e.preventDefault()))}M.setZoom(0,0,null!=e.initialChunkWidth?M.toZoomFactor(e.initialChunkWidth):M.zoomFactor),x.setCenter(CB3Libs.Long.ZERO,CB3Libs.Long.ZERO),$(window).resize((e=>i(!1))),i(!0),e.triggerHandler("canvasinit",[c.get(0)]),e.on("uiloaded",(e=>i()))},SeedMapTiles.calcTileParams=function(e){return.25>e?{size:512,scale:8}:.5>e?{size:256,scale:4}:1>e?{size:128,scale:2}:2>e?{size:64,scale:1}:4>e?{size:32,scale:.5}:8>e?{size:16,scale:.25}:{size:8,scale:.25}},$.fn.dimensionSelection=function(e){var n=$(this);if(!(n.length<1)){var i={select:n.find("select"),overworldOption:n.find('option[value="overworld"]'),netherOption:n.find('option[value="nether"]'),endOption:n.find('option[value="end"]')},t={overworld:1,nether:8,end:1},o={getDimension:function(){return i.select.val()}},r={onChange:function(){var n=o.getDimension();n&&(window.__analytics_dimension=n,e.triggerHandler("dimensionchanged",[n,t[n]?t[n]:1]))},onPlatformChange:function(n){var t=e.getSupportedDimensions?e.getSupportedDimensions(n):{},o=!!t.nether,a=!!t.end,s=$.contains(document,i.netherOption[0]),l=$.contains(document,i.endOption[0]);s&&!o?i.netherOption.detach():!s&&o&&(i.netherOption.insertAfter(i.overworldOption),s=!0),l&&!a?i.endOption.detach():!l&&a&&i.endOption.insertAfter(s?i.netherOption:i.overworldOption),r.onChange()}};i.select.change(r.onChange),e.initialDimension&&i.select.val(e.initialDimension),e.on("platformchange",(function(e,n){r.onPlatformChange(n)})),r.onChange()}},$.fn.biomeSelection=function(e){var n=$(this);if(!(n.length<1)){var i=CB3Libs.Dimension.Overworld,t={checkbox:n.find("#biome-selection-checkbox"),select:n.find("#biome-selection-select"),selectWrap:n.find("#biome-selection-select-wrap")},o={isFilterActive:function(){return t.checkbox.is(":checked")}},r={getBiomeValue:function(){if(!o.isFilterActive())return!1;var e=t.select.select2("val");return!(e.length<1)&&e.map((function(e){return+e}))},triggerBiomeFilterEvent:function(){var n=r.getBiomeValue();window.__analytics_biomeFilter=n,e.triggerHandler("biomefilterchanged",[n])}},a={onFilterChanged:function(){var e=o.isFilterActive();t.select.select2("enable",e),r.triggerBiomeFilterEvent()},onBiomesChanged:function(){var e=t.select.select2("container").find(".select2-input")[0];e.value="",e.dispatchEvent(new Event("change")),r.triggerBiomeFilterEvent(),t.selectWrap.find(".select2-search-choice > div").removeAttr("title")},dimensionChanged:function(e){e!==i&&(i=e,t.select.select2("val",[]),t.select.trigger("change"))}};t.select.select2({data:function(){return{results:CB3Libs.biomeList.filter((function(e){return e.dimension===i})).reduce((function(e,n){return e.push(n),(n.oldNames||[]).forEach((function(i){e.push(Object.assign({},n,{name:i}))})),e}),[]).map((function(e){return{id:e.id,text:e.name,rgb:e.rgb}}))}},multiple:!0,placeholder:"选择生物群系",formatResult:function(e){return'<div class="biome-square" style="background-color:rgb('+e.rgb.join(",")+');"></div>'+e.text},formatSelection:function(e){return'<div class="biome-square" style="background-color:rgb('+e.rgb.join(",")+');"></div>'+e.text},escapeMarkup:function(e){return e},matcher:function(e,n,i){return(n+" "+i.id).toUpperCase().indexOf((""+e).toUpperCase())>=0},width:"resolve"}),t.checkbox.change(a.onFilterChanged),t.select.change(a.onBiomesChanged),e.on("applydimensionchanged",(function(e,n){a.dimensionChanged(n)})),a.onFilterChanged()}},$.fn.seedMapLayers=function(e){var n=$(this);if(!(n.length<1)){var i={container:n,selectAll:n.find("#seedmap-checkall"),unselectAll:n.find("#seedmap-uncheckall"),poiGrid:n.find("#seedmap-layers"),pois:n.find("#seedmap-layers button"),toggle:n.find("#seedmap-layers-toggle-hor"),zoomWarning:n.find(".seedmap-layers-warning"),scrollbarWrapper:n.find("[data-simplebar]")},t=e.initialDimension,o=[],r=e.initialHiddenPois||[],a={applyPois:function(e){i.pois.each((function(n,i){var t=i.dataset.poi;-1!==e.indexOf(t)?i.setAttribute("aria-checked","true"):i.removeAttribute("aria-checked","false")}))},applyFilters:function(){i.pois.each((function(e,n){var i=n.dataset.poi;"checkAll"===i||"unCheckAll"===i||"biomes"===i||CB3PoiConfig[i].dimension===t&&-1!==o.indexOf(i)?n.classList.remove("hidden"):n.classList.add("hidden")}));try{var e=window.SimpleBar&&window.SimpleBar.instances.get(i.scrollbarWrapper.get(0));e&&e.recalculate()}catch(e){}},applyHiddenPois:function(){i.pois.each((function(e,n){var i=n.dataset.poi;-1!==r.indexOf(i)?n.classList.add("zoom-hidden"):n.classList.remove("zoom-hidden")}))},refreshZoomWarning:function(){var e=!1;i.pois.each((function(n,i){e||!i.classList.contains("zoom-hidden")||"true"!==i.getAttribute("aria-checked")||i.classList.contains("hidden")||(e=!0)})),e?i.zoomWarning.removeClass("hidden"):i.zoomWarning.addClass("hidden")},getPois:function(){var e=[];return i.pois.each((function(n,i){var t=i.dataset.poi;"true"===i.getAttribute("aria-checked")&&e.push(t)})),{pois:e}}},s={notifyPoiChange:function(){var n=a.getPois();e.triggerHandler("poischanged",[n])},setAllSelected:function(e){i.pois.attr("aria-checked",e?"true":"false")}},l={poiClicked:function(){"true"===this.getAttribute("aria-checked")?this.setAttribute("aria-checked","false"):this.setAttribute("aria-checked","true"),a.refreshZoomWarning(),s.notifyPoiChange()},selectAll:function(){s.setAllSelected(!0),a.refreshZoomWarning(),s.notifyPoiChange()},unselectAll:function(){s.setAllSelected(!1),a.refreshZoomWarning(),s.notifyPoiChange()},dimensionChanged:function(e){t!==e&&(t=e,a.applyFilters(e),a.refreshZoomWarning())},supportedPoisChanged:function(e){o=e,a.applyFilters(),a.refreshZoomWarning()},toggleClicked:function(){i.container.hasClass("seedmap-layers-expanded")?(i.container.removeClass("seedmap-layers-expanded"),i.toggle.text("▲")):(i.container.addClass("seedmap-layers-expanded"),i.toggle.text("▼"))},hiddenPoisChanged:function(e){r=e,a.applyHiddenPois(),a.refreshZoomWarning()}};i.toggle.click(l.toggleClicked),i.pois.click(l.poiClicked),i.selectAll.click(l.selectAll),i.unselectAll.click(l.unselectAll),e.on("applydimensionchanged",(function(e,n){l.dimensionChanged(n)})),e.on("supportedpoischanged",(function(e,n){l.supportedPoisChanged(n)})),e.on("hiddenpoischanged",(function(e,n){l.hiddenPoisChanged(n)})),a.applyPois(e.initialPois),a.applyFilters(),a.applyHiddenPois(),a.refreshZoomWarning(),s.notifyPoiChange()}},$.fn.biomHeightSelect=function(e){var n=$(this);if(!(n.length<1)){var i=e.initialDimension,t=null,o=e.initialPois,r=null,a={maybeUpdateEnabledState:function(){var e=i===CB3Libs.Dimension.Overworld,a=t&&CB3Libs.supportsCaveBiomes(t.cb3World),s=-1!==o.indexOf("biomes"),l=e&&a&&s;l!==r&&(r=l,n.attr("disabled",!l))}},s={triggerUpdate:function(){var i=n.val();e.triggerHandler("biomeheightchanged",[i])}};e.on("applydimensionchanged",(function(e,n){i=n,a.maybeUpdateEnabledState()})),e.on("platformchange",(function(e,n){t=n,a.maybeUpdateEnabledState()})),e.on("poischanged",(function(e,n){o=n.pois,a.maybeUpdateEnabledState()})),n.change(s.triggerUpdate),a.maybeUpdateEnabledState(),s.triggerUpdate()}},$.fn.heightsToggle=function(e){var n=$(this);if(!(n.length<1)){var i={container:n,checkbox:n.find("#show-heights-checkbox")},t=e.initialDimension,o=null,r=e.initialPois,a=e.initialBiomeHeight,s={updateEnabledState:function(){var e=l.isSupported(t,o,r);i.checkbox.attr("disabled",!e),e?i.container.removeClass("disabled"):i.container.addClass("disabled")}},l={isSupported:function(e,n,i){var t=e===CB3Libs.Dimension.Overworld,o=-1!==i.indexOf("biomes")&&"depth0"===a,r=n&&(n.cb3World.javaVersion>=CB3Libs.JavaVersion.V1_18||n.cb3World.bedrockVersion>=CB3Libs.BedrockVersion.V1_18);return t&&o&&r},triggerUpdate:function(){var n=!!i.checkbox.is(":checked");e.triggerHandler("showheightschanged",[n])}};e.on("applydimensionchanged",(function(e,n){t=n,s.updateEnabledState()})),e.on("platformchange",(function(e,n){o=n,s.updateEnabledState()})),e.on("poischanged",(function(e,n){r=n.pois,s.updateEnabledState()})),e.on("biomeheightchanged",(function(e,n){a=n,s.updateEnabledState()})),i.checkbox.change(l.triggerUpdate),s.updateEnabledState(),l.triggerUpdate()}};var CB3PoiConfig=function(){function e(e){return((e=Math.round(10*e)/10)+"").replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function n(e){return e[2].map((function(n){return[e[0],e[1],n]}))}function i(e,n){return n.edition===CB3Libs.Edition.Java&&n.javaVersion>=CB3Libs.JavaVersion.V1_18?[16*e[0],null,16*e[1]]:[16*e[0]+8,null,16*e[1]+8]}function t(e){return e&&null!=e[0]&&null!=e[2]}var o={chunkClassifier:SeedMapTiles.calcTileParams(8).size,veryBig:SeedMapTiles.calcTileParams(4).size,big:SeedMapTiles.calcTileParams(2).size,normal:SeedMapTiles.calcTileParams(.5).size,small:SeedMapTiles.calcTileParams(.25).size},r={},a={chunk:function(e){return e[0]+"//"+e[1]},xzBlock:function(e,n){return e+"/"+n},xyBlockArr:function(e){return a.xzBlock(e[2][0],e[2][2])}};return r[CB3Libs.POI.AmethystGeode]={gaId:"Ag",imgSrc:"amethyst.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.chunkClassifier,splitPois:n,getHoverText:function(n){return"Likely Geode @ "+n[2].map((function(n){return e(n[0])+" / "+e(n[1])+" / "+e(n[2])})).join(", ")},getTooltipText:function(){return"可能的紫晶洞"},getCoords:function(e){return e[2]},fillColor:"98,69,149",getHash:a.xyBlockArr},r[CB3Libs.POI.AncientCity]={gaId:"Ac",imgSrc:"ancient-city.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.normal,getTooltipText:function(){return"远古城市"},getCoords:function(e){return[16*e[0]+8,-51,16*e[1]+8]},getHoverText:function(n){var i=r[CB3Libs.POI.AncientCity].getCoords(n);return"Ancient City @ "+e(i[0])+" / "+i[1]+" / "+e(i[2])},fillColor:"11,47,44",getHash:a.chunk},r[CB3Libs.POI.BastionRemnant]={gaId:"Br",imgSrc:{bridge:"bastion-bridge.png",stables:"bastion-stables.png",units:"bastion-units.png",treasure:"bastion-treasure.png"},dimension:CB3Libs.Dimension.Nether,maxTileSize:o.big,_getType:function(e){return null==e[2].type?null:"units"===e[2].type?"居住区":"hoglin_stable"===e[2].type?"疣猪兽棚":"treasure"===e[2].type?"藏宝室":"bridge"===e[2].type?"桥":null},getCoords:function(e){return[16*e[0],null,16*e[1]]},getHoverText:function(e){var n=r[CB3Libs.POI.BastionRemnant]._getType(e);return null==n?null:"Type: "+n},getTooltipText:function(e){return"堡垒遗迹 ("+r[CB3Libs.POI.BastionRemnant]._getType(e)+")"},getImg:function(e){return"hoglin_stable"===e.type?"stables":"treasure"===e.type?"treasure":"bridge"===e.type?"bridge":"units"},fillColor:function(e){return null==e.type||"units"===e.type?"107,107,107":"hoglin_stable"===e.type?"245,0,122":"treasure"===e.type?"139,69,19":"bridge"===e.type?"8,145,17":"0,0,0"},getHash:a.chunk},r[CB3Libs.POI.BuriedTreasure]={gaId:"Bt",imgSrc:"buried-treasure.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.big,getHoverText:function(n,i){var t=r[CB3Libs.POI.BuriedTreasure].getCoords(n,i);return"Treasure @ "+e(t[0])+" / "+e(t[2])},getTooltipText:function(){return"埋藏的宝藏"},getCoords:function(e,n){var i=n.edition===CB3Libs.Edition.Java?9:8;return[16*e[0]+i,null,16*e[1]+i]},fillColor:"166,117,78",getHash:a.chunk},r[CB3Libs.POI.Cave]={gaId:"Ca",imgSrc:"cave.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.veryBig,splitPois:n,_getSize:function(e){return e.count<600?"小":e.count<1800?"中":"大"},getCoords:function(e){return e[2].reference.pos},getTooltipText:function(e){return e[2].count,"芝士洞穴 ("+r[CB3Libs.POI.Cave]._getSize(e[2])+")"},fillColor:function(){return"68,68,68"},getHash:function(e){return a.xzBlock(e[2].reference.pos[0],e[2].reference.pos[2])}},r[CB3Libs.POI.DesertTemple]={gaId:"Dt",imgSrc:"desert-temple.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.normal,getTooltipText:function(e,n){return n.edition===CB3Libs.Edition.Java&&n.javaVersion>=CB3Libs.JavaVersion.V1_18?"可能的沙漠神殿":"沙漠神殿"},fillColor:"143,121,0",getHash:a.chunk},r[CB3Libs.POI.DesertWell]={gaId:"Dw",imgSrc:"desert-well.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.big,getTooltipText:function(){return"可能的沙漠水井"},getCoords:function(e){return e[2].slice(0,3)},fillColor:"40,57,161",getHash:a.chunk},r[CB3Libs.POI.Dungeon]={gaId:"D",imgSrc:{default:"dungeon.png",zombie:"dungeon-zombie.png",spider:"dungeon-spider.png",skeleton:"dungeon-skeleton.png"},dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.chunkClassifier,getImg:function(e){var n=e[3];return n===CB3Libs.DungeonType.ZOMBIE?"zombie":n===CB3Libs.DungeonType.SKELETON?"skeleton":"spider"},fillColor:function(e){return e.length>1?"200,100,0":e[0][3]===CB3Libs.DungeonType.ZOMBIE?"70,109,29":e[0][3]===CB3Libs.DungeonType.SKELETON?"125,125,125":e[0][3]===CB3Libs.DungeonType.SPIDER?"168,46,0":"0,0,0"},splitPois:n,getCoords:function(e){return e[2].slice(0,3)},_getTypeText:function(e){return e===CB3Libs.DungeonType.ZOMBIE?"僵尸":e===CB3Libs.DungeonType.SKELETON?"骷髅":e===CB3Libs.DungeonType.SPIDER?"蜘蛛":null},getTooltipText:function(e,n){var i=r[CB3Libs.POI.Dungeon]._getTypeText(e[2][3])||"未知生物";return(n.edition===CB3Libs.Edition.Bedrock&&n.bedrockVersion>=CB3Libs.BedrockVersion.V1_18?"可能的":"预计的")+"地牢("+i+")"},getHoverText:function(n){return n[2].map((function(n){return(r[CB3Libs.POI.Dungeon]._getTypeText(n[3])||"Dungeon")+" @ "+[e(n[0]+""),n[1],e(n[2]+"")].join(" / ")}),"").join(", ")},getHash:a.xyBlockArr},r[CB3Libs.POI.Fossil]={gaId:"F",imgSrc:"fossil.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.chunkClassifier,fillColor:"90,90,90",splitPois:function(e){return e[2]?n(e):[[e[0],e[1]]]},getCoords:function(e){return t(e[2])?e[2].slice(0,3):[16*e[0]+8,null,16*e[1]+8]},getTooltipText:function(e){var n=e[2]&&"diamond"===e[2][3]?"钻石化石":"化石";return t(e[2])||(n+=" (预计位置)"),n},getHoverText:function(n){return t(n[2])?n[2].map((function(n){return"Fossil @ "+[e(n[0]+""),n[1],e(n[2]+"")].join(" / ")}),"").join(", "):null},getHash:a.chunk},r[CB3Libs.POI.EndCity]={gaId:"E",imgSrc:{default:"end-city.png",ship:"end-city-ship.png"},dimension:CB3Libs.Dimension.End,maxTileSize:o.normal,getImg:function(e){return null==e.hasShip||e.hasShip?"ship":"default"},fillColor:function(e){return null==e.hasShip||e.hasShip?"73,49,73":"130,130,130"},getTooltipText:function(e){return"可能的"+(null==e[2].hasShip?"末地城":e[2].hasShip?"末地城 (带船)":"末地城 (无船)")},getHoverText:function(e){return null==e[2].hasShip?null:e[2].hasShip?"End City with ship":"End City without ship"},getHash:a.chunk},r[CB3Libs.POI.EndGateway]={gaId:"Eg",imgSrc:"end-gateway.png",dimension:CB3Libs.Dimension.End,maxTileSize:o.normal,fillColor:"6,57,49",splitPois:n,getCoords:function(e){return[e[2].x,null,e[2].z]},getHoverText:function(n){return"End Gateway @ "+e(n[2][0].x)+" / "+e(n[2][0].z)},getTooltipText:function(){return"末地折跃门"},getHash:function(e){return a.xzBlock(e[2].x,e[2].z)}},r[CB3Libs.POI.NetherFortress]={gaId:"N",imgSrc:"nether-fortress.png",dimension:CB3Libs.Dimension.Nether,maxTileSize:o.big,fillColor:"195,65,55",getCoords:function(e){return[16*e[0]+11,null,16*e[1]+11]},getTooltipText:function(){return"下界要塞 (十字路口)"},getHoverText:function(n){return"Crossing @ "+e(11+(n[0]<<4))+" / "+e(11+(n[1]<<4))},getHash:a.chunk},r[CB3Libs.POI.Igloo]={gaId:"I",imgSrc:{default:"igloo.png",basement:"igloo-basement.png"},dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.normal,getImg:function(e){return e.hasBasement?"basement":"default"},fillColor:function(e){return e.hasBasement?"35,87,205":"86,86,86"},getTooltipText:function(e){return null==e[2].hasBasement?"Igloo":e[2].hasBasement?"雪屋 (带地下室)":"雪屋 (无地下室)"},getHoverText:function(e){return null==e[2].hasBasement?null:e[2].hasBasement?"Igloo with basement":"Igloo without basement"},getHash:a.chunk},r[CB3Libs.POI.JungleTemple]={gaId:"J",imgSrc:"jungle-temple.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.normal,getTooltipText:function(e,n){return n.edition===CB3Libs.Edition.Java&&n.javaVersion>=CB3Libs.JavaVersion.V1_18?"可能的丛林神庙":"丛林神庙"},fillColor:"114,133,10",getHash:a.chunk},r[CB3Libs.POI.WoodlandMansion]={gaId:"Ma",imgSrc:"mansion.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.small,getTooltipText:function(e,n){return n.edition===CB3Libs.Edition.Java&&n.javaVersion>=CB3Libs.JavaVersion.V1_18?"可能的林地府邸":"林地府邸"},fillColor:"160,82,45",getHash:a.chunk},r[CB3Libs.POI.Mineshaft]={gaId:"M",imgSrc:"mineshaft.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.veryBig,getTooltipText:function(){return"废弃矿井"},fillColor:"148,116,0",getHash:a.chunk},r[CB3Libs.POI.OceanMonument]={gaId:"Om",imgSrc:"ocean-monument.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.normal,getTooltipText:function(){return"海底神殿"},fillColor:"100,100,220",getHash:a.chunk},r[CB3Libs.POI.OceanRuin]={gaId:"Or",imgSrc:{default:"ocean-ruin.png",special:"ocean-ruin-special.png"},dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.big,getImg:function(e){return e.isLarge&&e.clusterSize>0?"special":"default"},fillColor:function(e){return"cold"===e.type?e.isLarge&&e.clusterSize>0?"51,102,255":"80,98,149":e.isLarge&&e.clusterSize>0?"255,82,51":"149,91,80"},_getLabel:function(e){var n=e[2];return[n.isLarge?"大型":"小型","warm"===n.type?"热带":"寒带","废墟",n.clusterSize>0&&"团簇 ("+n.clusterSize+"个小型废墟)"].filter(Boolean).join("")},getTooltipText:function(e){return r[CB3Libs.POI.OceanRuin]._getLabel(e)},getHoverText:function(e){return r[CB3Libs.POI.OceanRuin]._getLabel(e)},getHash:a.chunk},r[CB3Libs.POI.PillagerOutpost]={gaId:"Po",imgSrc:"pillager-outpost.png",dimension:CB3Libs.Dimension.Overworld,getCoords:i,maxTileSize:o.normal,getTooltipText:function(){return"掠夺者前哨站"},fillColor:"96,63,28",getHash:a.chunk},r[CB3Libs.POI.Ravine]={gaId:"Rv",imgSrc:{normal:"ravine.png",special:"ravine-special.png",underwater:"ravine-underwater.png",underwaterSpecial:"ravine-underwater-special.png"},dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.chunkClassifier,splitPois:n,getCoords:function(e){return[e[2].x,e[2].y,e[2].z]},getImg:function(e){return e.isUnderwater?e.isMegaRavine?"underwaterSpecial":"underwater":e.isMegaRavine?"special":"normal"},getTooltipText:function(n){var i=n[2];return[i.isMegaRavine&&"大型",i.isUnderwater&&"水下","峡谷",i.thickness&&" (大小: "+e(i.thickness)+")"].filter(Boolean).join("")},getHoverText:function(n){var i=n[2][0];return[i.isMegaRavine&&"Mega",i.isUnderwater&&"Underwater","Ravine","@ "+e(i.x)+" / "+e(i.y)+" / "+e(i.z)].filter(Boolean).join("")},fillColor:function(e){var n=e[0];return n.isUnderwater?n.isMegaRavine?"168,7,213":"0,0,255":n.isMegaRavine?"128,25,0":"20,90,0"},getHash:function(e){return a.xzBlock(e[2].x,e[2].z)}},r[CB3Libs.POI.OreVein]={gaId:"Ov",imgSrc:{copper:"raw-copper.png",iron:"raw-iron.png"},dimension:CB3Libs.Dimension.Overworld,_getSize:function(e){return e.oreCount<6?"小":e.oreCount<9?"中":"大"},splitPois:n,getCoords:function(e){return e[2].reference},getImg:function(e){return e.type},maxTileSize:o.chunkClassifier,getTooltipText:function(e){return["copper"===e[2].type?"铜矿脉":"铁矿脉","("+r[CB3Libs.POI.OreVein]._getSize(e[2])+")"].join("")},fillColor:"96,63,28",getHash:function(e){return a.xzBlock(e[2].reference[0],e[2].reference[2])}},r[CB3Libs.POI.RuinedPortalOverworld]={gaId:"Rp",imgSrc:"ruined-portal.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.big,getTooltipText:function(){return"可能的废弃传送门"},fillColor:"109,9,109",getHash:a.chunk},r[CB3Libs.POI.RuinedPortalNether]={gaId:"Rpn",imgSrc:"ruined-portal.png",dimension:CB3Libs.Dimension.Nether,maxTileSize:o.big,getTooltipText:function(){return"可能的废弃传送门"},fillColor:"109,9,109",getHash:a.chunk},r[CB3Libs.POI.Shipwreck]={gaId:"Sw",imgSrc:"shipwreck.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.big,getTooltipText:function(){return"沉船"},fillColor:"108,88,97",getHash:a.chunk},r[CB3Libs.POI.SlimeChunk]={gaId:"Sc",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.chunkClassifier,getTooltipText:function(){return"史莱姆区块"},fillColor:"29,145,44",fillColorOuter:"40,199,60",getHash:a.chunk},r[CB3Libs.POI.Spawn]={gaId:"Sp",imgSrc:"spawn.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.small,getCoords:function(e){return[e[2].x,null,e[2].z]},getTooltipText:function(){return"预计重生点"},fillColor:"50,50,50",getHash:a.chunk},r[CB3Libs.POI.Stronghold]={gaId:"St",imgSrc:"stronghold.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.small,fillColor:"195,65,55",getCoords:function(e){return[16*e[0]+4,null,16*e[1]+4]},getTooltipText:function(){return"要塞 (楼梯)"},getHoverText:function(n){return"Stronghold stairway @ "+e(4+(n[0]<<4))+" / "+e(4+(n[1]<<4))},getHash:a.chunk},r[CB3Libs.POI.TrailRuin]={gaId:"Tr",imgSrc:"trail-ruin.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.normal,getTooltipText:function(){return"古迹废墟"},getCoords:function(e){return e[2].slice(0,3)},fillColor:"123,80,20",getHash:a.chunk},r[CB3Libs.POI.Village]={gaId:"V",imgSrc:{default:"village.png",zombie:"village-zombie.png"},dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.normal,getImg:function(e){return e.zombie?"zombie":"default"},getCoords:i,fillColor:function(e){return e.zombie?"200,0,190":null==e.type?"100,131,63":{desert:"180,101,4",plains:"100,131,63",savanna:"138,128,56",taiga:"11,102,89",snowy:"120,120,120"}[e.type]},_getLabel:function(e){var n=e[2];if(null==n.type)return null;var i={desert:"沙漠村庄",plains:"平原村庄",savanna:"热带草原村庄",taiga:"针叶林村庄",snowy:"雪原村庄"}[n.type];return n.zombie&&(i="僵尸 "+i),i},getTooltipText:function(e){return r[CB3Libs.POI.Village]._getLabel(e)||"Village"},getHoverText:function(e){return r[CB3Libs.POI.Village]._getLabel(e)},getHash:a.chunk},r[CB3Libs.POI.WitchHut]={gaId:"Wh",imgSrc:"witch-hut.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.normal,getTooltipText:function(){return"女巫小屋"},fillColor:"169,44,212",getHash:a.chunk},r[CB3Libs.POI.ItemOverworld]={gaId:"IOw",imgSrc:"golden-apple.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.small,fillColor:"145,81,13",getTooltipText:function(){return"可能的附魔金苹果 (宝箱)"},getHoverText:function(){return"Likely Enchanted Apple (temple chest)"},getHash:a.chunk},r[CB3Libs.POI.HTCustomize]={gaId:"HTc",imgSrc:"golden-apple.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.small,fillColor:"145,81,13",getTooltipText:HTPoiConfig.getToolTipText,getHoverText:HTPoiConfig.getHoverText,getHash:function(e){return a.xzBlock(Math.floor(16*e[2].chunkPos[0]),Math.floor(16*e[2].chunkPos[1]))},getCoords:HTPoiConfig.getCoords},r[CB3Libs.POI.LavaPool]={shortId:"Lp",imgSrc:{bucket:"lava-bucket.png",cave:"lava-cave.png"},getImg:function(e){return"undergroundLake"===e.type?"bucket":"cave"},dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.chunkClassifier,splitPois:n,fillColor:"211,83,14",getHash:function(e){return a.xzBlock(e[2].pos[0],e[2].pos[2])},getTooltipText:function(e){return"cave"===e[2].type?"熔岩圈层":"可能的岩浆湖"},getTooltipAdditionalText:function(){return"Never dig straight down"},getCoords:function(e){return e[2].pos}},r[CB3Libs.POI.TrialChamber]={shortId:"Tc",imgSrc:"trial-chamber.png",dimension:CB3Libs.Dimension.Overworld,maxTileSize:o.big,getTooltipText:function(){return"试炼密室"},getCoords:function(e){return null!=e[2]?e[2]:[16*e[0],null,16*e[1]]},fillColor:"113,45,25",getHash:a.chunk},r}(),CB3TooltipManager=function(){function e(e){return(e+="").replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function n(n,i){var o=CB3PoiConfig[n.type].getTooltipText(n.item,i.platform.cb3World),r="X: "+e(n.coords[0]);null!=n.coords[1]&&(r+=" Y: "+e(n.coords[1])),r+=" Z: "+e(n.coords[2]);var a=document.createElement("div"),l=document.createElement("label");l.classList.add("poi-complete-label");var c=document.createElement("input");return c.classList.add("poi-complete-checkbox"),l.appendChild(c),l.appendChild(document.createTextNode(o)),c.type="checkbox",c.checked=s?HTSelectManager.isPoiSelected(n.type,CB3PoiConfig[n.type].getHash(n.item)):CB3MapUserDataManager.isPoiMarked(i.platform,i.seed,n.type,CB3PoiConfig[n.type].getHash(n.item)),c.addEventListener("change",(function(e){s?e.target.checked?HTSelectManager.selectPoi(n.type,CB3PoiConfig[n.type].getHash(n.item),o,n.coords):HTSelectManager.unselectPoi(n.type,CB3PoiConfig[n.type].getHash(n.item)):e.target.checked?CB3MapUserDataManager.markPoi(i.platform,i.seed,n.type,CB3PoiConfig[n.type].getHash(n.item),o,n.coords):CB3MapUserDataManager.unmarkPoi(i.platform,i.seed,n.type,CB3PoiConfig[n.type].getHash(n.item)),t()})),a.appendChild(l),a.appendChild(document.createTextNode(r)),a}function i(e){var i=o.getPoiData(a);if(a&&null!=i){var t=r.reference,s=i.rect,l=n(i,e);r.setProps({content:l,getReferenceClientRect:function(){var e=t.getBoundingClientRect();return{width:s.width,height:s.height,top:e.top+s.y,bottom:e.top+s.y+s.height,left:e.left+s.x,right:e.left+s.x+s.width}}}),r.show()}else r.hide()}var t,o=function(){function e(){r.clearRect(0,0,n.width,n.height),i={},t={},o=1}var n=document.createElement("canvas");n.width=0,n.height=0;var i={},t={},o=1,r=n.getContext("2d",{willReadFrequently:!0});return{clear:e,updateDimensions:function(i,t){e(),n.width=i,n.height=t},getPoiData:function(e){return t[e]},getPoiIdAt:function(e,n){var t=r.getImageData(Math.round(e),Math.round(n),1,1).data,o=t[0]>>3|t[1]>>3<<5|t[2]>>3<<10;return i[o]},addPoi:function(e,n){var a=o++,s=Math.pow(2,5)-1,l=(a&s)<<3,c=(a>>5&s)<<3,d=(a>>10&s)<<3;return i[a]=e,t[e]=n,{fillRect:function(e,n,i,t){r.fillStyle="rgb("+l+","+c+","+d+")",r.fillRect(e,n,i,t)}}}}}(),r=null,a=null,s=!1;return{onInit:function(e,n){r=tippy(e,{duration:0,arrow:!1,hideOnClick:!1,interactive:!0,theme:"sign",trigger:"manual",allowHTML:!0}),t=n},onCanvasClick:function(e,n,t){var r=o.getPoiIdAt(e,n);if(null==r&&null==a)return{hit:!1,handled:!1};if(a=r===a?null:r,r&&window._enableAnalytics&&window.gtag){var s=o.getPoiData(a);s&&s.type&&window.gtag("event","CB_ChunkApp_SelectPoi",{poi:s.type})}return i(t),{hit:null!=r,handled:!0}},testCanvasHit:function(e,n){return null!=o.getPoiIdAt(e,n)},onMapDimensionsChanged:function(e,n){o.updateDimensions(e,n)},onParamsChanged:function(){o.clear()},beforeMapRepaint:function(){o.clear()},onMapRepainted:function(e){r&&i(e)},setSelectMode:function(e){s=e},isSelectMode:function(){return s},isClickable:function(e,n){return null!=o.getPoiIdAt(e,n)},isSelected:function(e){return e===a},onPoiDrawn:function(e,n,i,t,r,a,s,l,c){var d=r+s,u=a+l,g=Math.min(c[2],Math.max(c[0],r)),h=Math.min(c[3],Math.max(c[1],a)),f=Math.min(c[2],Math.max(c[0],d)),m=Math.min(c[3],Math.max(c[1],u));f>g&&m>h&&o.addPoi(n,{type:e,item:t,coords:i,rect:{x:g,y:h,width:f-g,height:m-h}}).fillRect(g-0,h-0,f-g+0,m-h+0)}}}(),CB3MapUserDataManager=function(){function e(e,n){return e.label+"/"+n.toString()}function n(n,i,t){var o=e(n,i);r[o]||(r[o]={})}function i(e,n){return e+";"+n}function t(){try{window.localStorage.setItem(o,JSON.stringify(r))}catch(e){window.gtag&&window._enableAnalytics&&window.gtag("event","CB_ChunkApp_UserDataUpdateError")}}var o="CB3_MAP_DATA",r={},a=0;try{r=JSON.parse(window.localStorage.getItem(o))||{},Object.keys(r).forEach((function(e){a+=Object.keys(r[e]).length}))}catch(e){window.gtag&&window._enableAnalytics&&window.gtag("event","CB_ChunkApp_UserDataLoadError")}var s={isPoiMarked:function(n,t,o,a){var s=e(n,t);return r[s]&&r[s][i(o,a)]},markPoi:function(o,s,l,c,d,u){n(o,s);var g=e(o,s);r[g][i(l,c)]={state:!0,text:d,coord:u},t(),a+=1},unmarkPoi:function(o,s,l,c){n(o,s);var d=e(o,s);delete r[d][i(l,c)],t(),a-=1},getNumberMarkedPois:function(){return a}};return s}(),CB3FinderApp=function(){function e(e){var t=n.filterPoisByZoomLevel?Object.keys(CB3PoiConfig).filter((function(n){return CB3PoiConfig[n].maxTileSize<e.tileSize})):[];return i.triggerHandler("hiddenpoischanged",[t]),t}var n=CB3FinderAppConfig||{},i=$({}),t=Object.keys(CB3PoiConfig),o="all"===n.pois?Object.keys(CB3PoiConfig).filter((function(e){return!n.initiallyHiddenPois||-1===n.initiallyHiddenPois.indexOf(e)})).concat(["biomes"]):n.pois||[];Object.assign(i,{drawAll:!0,async:!0,loadingBackground:"228,232,235",drawChunkBordersPostRender:!0,deferredRender:!0,distantViewDeferredRender:!0,initialDimension:n.dimension||(n.dimensions?n.dimensions[0]:null),initialBiomeHeight:"surface",initialPois:o,getSupportedDimensions:function(e){return n.dimensions?{overworld:(null==e.restrictToDimensions||-1!==e.restrictToDimensions.indexOf("overworld"))&&-1!==n.dimensions.indexOf(CB3Libs.Dimension.Overworld),nether:(null==e.restrictToDimensions||-1!==e.restrictToDimensions.indexOf("nether"))&&-1!==n.dimensions.indexOf(CB3Libs.Dimension.Nether),end:(null==e.restrictToDimensions||-1!==e.restrictToDimensions.indexOf("end"))&&-1!==n.dimensions.indexOf(CB3Libs.Dimension.End)}:{}}},{dungeon:{initialChunkWidth:32,minChunkWidth:8,maxChunkWidth:32},chunkClassifier:{initialChunkWidth:16,minChunkWidth:8,maxChunkWidth:64},big:{initialChunkWidth:8,minChunkWidth:2,maxChunkWidth:32},normal:{initialChunkWidth:4,minChunkWidth:.5,maxChunkWidth:32},small:{initialChunkWidth:2,minChunkWidth:.25,maxChunkWidth:32},full:{initialChunkWidth:4,minChunkWidth:.25,maxChunkWidth:64}}[n.chunkWidths]);var r=null!=navigator.hardwareConcurrency&&navigator.hardwareConcurrency>1?navigator.hardwareConcurrency-1:1;r=Math.min(r,6);for(var a=[],s=0;r>s;s++)a[s]=new Worker(window.URL.createObjectURL(inlineWorker_k9bk8));CB3SharedTaskManagerMain.init(a);var l=[];a.forEach((function(e,n){e.addEventListener("message",(function(e){"check"===e.data.type&&l[n](e.data.results)}),!1)}));var c=new Worker(window.URL.createObjectURL(inlineWorker_k9bk8));c.addEventListener("message",(function(e){"getSupportedPois"===e.data.type&&i.triggerHandler("supportedpoischanged",[e.data.supportedPois])}),!1),i.on("platformchange",(function(e,n){c.postMessage({type:"getSupportedPois",platform:n})})),i.initialHideGridLines=n.hideGridLines;var d=null;return SeedMapTiles(i,{defaultPlatform:ChunkApp.Platform.java,nrParallel:r,init:function(n,t){CB3TooltipManager.onInit(n,(function(){i.triggerHandler("redrawmap")})),i.initialHiddenPois=e(t)},onParamsChanged:function(n,i){CB3TooltipManager.onParamsChanged(),-1!==i.indexOf("tileSize")&&e(n)},onMapDimensionsChanged:CB3TooltipManager.onMapDimensionsChanged,setSelectMode:CB3TooltipManager.setSelectMode,isClickable:CB3TooltipManager.isClickable,getHoverText:function(e,i,t,o){if(t.hits.biomes){var r=new Uint8Array(t.hits.biomes),a=t.hits.biomeScale,s=Math.floor((e-t.tile.x)/a),l=Math.floor((i-t.tile.z)/a),c=r[l*t.tile.xL/a+s];if(255===c)return null;var d=CB3Libs.biomeList[c];if(!d)return null;var u="生物群系: "+d.name;if(t.hits.heights)u+=", Y: "+(r=new Int32Array(t.hits.heights))[l*t.tile.xL/a+s];return u}if(!n.renderImg){if(!t.hits.poiResults)return null;e=Math.floor(e),i=Math.floor(i);for(var g=Object.keys(t.hits.poiResults).reverse(),h=0;h<g.length;h++)for(var f=g[h],m=CB3PoiConfig[f],p=t.hits.poiResults[f],v=0;v<p.length;v++){var b=p[v];if(b[0]===e&&b[1]===i)return m.getHoverText?m.getHoverText(b,o.platform.cb3World):null}return null}},loadTile:function(e,i,t){for(var o=null,r=0;r<a.length;r++)if(!l[r]){o=r;break}if(null==o)throw new Error("loadTile: Only "+a.length+" requests allowed at a time");l[o]=function(e){l[o]=null,t(e)};var s=Object.assign({},e,{pois:e.pois.filter((function(n){return CB3PoiConfig[n].dimension===e.dimension})).filter((function(i){return!n.filterPoisByZoomLevel||CB3PoiConfig[i].maxTileSize>=e.tileSize}))});if(e.dimension===CB3Libs.Dimension.Overworld){window.__analytics_biomeRequests+=e.tileSize*e.tileSize/4096}a[o].postMessage({type:"check",params:s,tile:i})},paintTile:function(e,i,o,r,a,s,l,c,u){function g(e,n){function i(e){return r.biomeScale>=1?e:Math.floor(e/r.biomeScale)*r.biomeScale}var t=Math.floor((i(e/16)-o.x)/r.biomeScale),a=Math.floor((i(n/16)-o.z)/r.biomeScale);return new Uint8Array(r.biomes)[a*o.xL/r.biomeScale+t]}if(r.poiResults[CB3Libs.POI.HTCustomize]=HTPoiConfig.getPoisInRegion(o),"biomes"!==i){if("slimeChunks"===i&&n.renderImg&&r.poiResults[CB3Libs.POI.SlimeChunk]){var h=r.poiResults[CB3Libs.POI.SlimeChunk],f=CB3PoiConfig[CB3Libs.POI.SlimeChunk],m=e.lineWidth;e.lineWidth=2,h.forEach((function(n){e.fillStyle="rgb("+f.fillColor+")";var i=l(n[0],n[1]),t=l(n[0]+1,n[1]+1);e.fillRect(i[0],i[1],t[0]-i[0]-1,t[1]-i[1]-1),e.strokeStyle="rgb("+f.fillColorOuter+")",e.strokeRect(i[0]+1,i[1]+1,t[0]-i[0]-3,t[1]-i[1]-3)})),e.lineWidth=m}if("pois"===i){var p=Object.keys(r.poiResults).sort((function(e,n){return t.indexOf(e)-t.indexOf(n)}));window.__analytics_lastPois=p,p.forEach((function(i){function t(n,t){var o=s.getImg?s.img[s.getImg(t[2])]:s.img,a=s.getCoords?s.getCoords(t,u.platform.cb3World):[16*t[0]+8,null,16*t[1]+8],d=l(a[0]/16,a[2]/16),h=CB3TooltipManager.isSelected(n),f=o.width*(h?1.25:1),m=o.height*(h?1.25:1),p=Math.floor(d[0]-f/2),v=Math.floor(d[1]-m/2),b=CB3TooltipManager.isSelectMode()?!HTSelectManager.isPoiSelected(i,s.getHash(t)):CB3MapUserDataManager.isPoiMarked(u.platform,u.seed,i,s.getHash(t));e.globalAlpha=b?CB3TooltipManager.isSelectMode()?.6:.45:1,r.biomeFilter&&-1!=r.biomeFilter.indexOf(g(a[0],a[2]))?(e.drawImage(o,p,v,f,m),CB3TooltipManager.onPoiDrawn(i,n,a,t,p,v,f,m,c)):r.biomeFilter&&r.biomes&&u.hidePoi&&!(r.biomeScale>2)||(e.drawImage(o,p,v,f,m),CB3TooltipManager.onPoiDrawn(i,n,a,t,p,v,f,m,c)),e.globalAlpha=1}if(i!==CB3Libs.POI.SlimeChunk||!n.renderImg){var o=r.poiResults[i],s=CB3PoiConfig[i];o.forEach((function(e){s.img&&n.renderImg?(s.splitPois?s.splitPois(e):[e]).forEach((function(e,n){var o=[i,e[0],e[1],n].join(";");CB3TooltipManager.isSelected(o)?d=function(){t(o,e)}:t(o,e)})):a(e[0],e[1],"function"==typeof s.fillColor?s.fillColor(e[2]):s.fillColor)}))}}))}}else if(window.__analytics_lastBiomes=!!r.biomeCanvas,r.biomeCanvas){var v=l(o.x,o.z),b=l(o.x+o.xL,o.z+o.zL);e.drawImage(r.biomeCanvas,Math.floor(v[0]),Math.floor(v[1]),Math.floor(b[0]-v[0]),Math.floor(b[1]-v[1]))}},processTile:function(e,n){function i(e,n){var i=e/256,t=n/256;return.5>i?Math.min(255,Math.max(0,Math.floor(2*i*t*256))):Math.min(255,Math.max(0,Math.floor(256*(1-2*(1-i)*(1-t)))))}if(!e.biomes)return e;var t=document.createElement("canvas");t.width=n.xL/e.biomeScale,t.height=n.zL/e.biomeScale;var o,r=new Uint8Array(e.biomes),a=e.heights&&new Int32Array(e.heights);if(a){o=[];for(var s=.025,l=1*(1/Math.sqrt(.5)*Math.sqrt(e.biomeScale)),c=45*Math.PI/180,d=315*Math.PI/180,u=Math.cos(c),g=Math.sin(c),h=0;h<t.height;h++)for(var f=Math.max(h-1,0),m=Math.min(h+1,t.height-1),p=0;p<t.width;p++){var v=Math.max(p-1,0),b=Math.min(p+1,t.width-1),C=s*a[h*t.width+v],w=s*a[h*t.width+b],B=s*a[f*t.width+p],k=(w-C)/l,S=(s*a[m*t.width+p]-B)/l,y=Math.atan(Math.sqrt(k*k+S*S)),x=Math.atan2(S,-k);x=0>x?Math.PI/2-x:x>Math.PI/2?2*Math.PI-x+Math.PI/2:Math.PI/2-x;var M=g*Math.cos(y)+u*Math.sin(y)*Math.cos(d-x),L=Math.min(255,Math.max(0,Math.floor(256*(M-.20710678118654746))));o[h*t.width+p]=L}}for(var T=t.getContext("2d"),A=T.createImageData(t.width,t.height),P=A.data,O=CB3Libs.biomeList,E=0;E<t.width*t.height;E++){var I=r[E];if(255!==I){var z=O[I].rgb;if(o?(P[4*E+0]=i(o[E],z[0]),P[4*E+1]=i(o[E],z[1]),P[4*E+2]=i(o[E],z[2])):(P[4*E+0]=z[0],P[4*E+1]=z[1],P[4*E+2]=z[2]),P[4*E+3]=255,e.biomeFilter)if(-1===e.biomeFilter.indexOf(I))P[4*E+3]=22;else{P[4*E+0]=Math.round(.9*P[4*E+0]),P[4*E+1]=Math.round(.9*P[4*E+1]),P[4*E+2]=Math.round(.9*P[4*E+2])}e.biomeFilter&&-1===e.biomeFilter.indexOf(I)&&(P[4*E+3]=32)}}return T.putImageData(A,0,0),Object.assign({},e,{biomeCanvas:t})},onCanvasClick:function(e,n,t){CB3TooltipManager.onCanvasClick(e,n,t)&&i.triggerHandler("redrawmap")},beforeMapRepaint:CB3TooltipManager.beforeMapRepaint,onMapRepainted:function(e){d&&(d(),d=null),CB3TooltipManager.onMapRepainted(e)}})}();$(document).ready((function(){function e(e,n){var i=document.createElement("canvas");return i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(e,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i}function n(n){var i,t,o;i=window.__seedMapPoisSpriteImage,t=function(i,t){if(i)n(i);else{var o=!1;Object.keys(CB3PoiConfig).forEach((function(i){var r=CB3PoiConfig[i].imgSrc;if(r&&!o)if("string"==typeof r){var a=window.__seedMapPoisSprite[r];if(!a)return n(new Error("sprite not found: "+r)),void(o=!0);CB3PoiConfig[i].img=e(t,a)}else CB3PoiConfig[i].img={},Object.keys(r).forEach((function(a){var s=window.__seedMapPoisSprite[r[a]];return s?void(CB3PoiConfig[i].img[a]=e(t,s)):(n(new Error("sprite not found: "+r[a])),void(o=!0))}))})),o||n()}},(o=new Image).onload=function(){t(null,o)},o.onerror=function(e){t(new Error(e))},o.src=i}var i;i=CB3FinderApp,n((function(e){return e?void chunkAppLoader.errorInit():(chunkAppLoader.init(i),void i.on("uiloaded",(function(){$("#biome-selection").biomeSelection(i),$("#show-heights-label").heightsToggle(i),$("#hide-poi-label").hidePoiToggle(i),$("#biome-dimension-selection").dimensionSelection(i),$(".seedmap-layers-wrapper").seedMapLayers(i),$("#biome-height-select").biomHeightSelect(i),$(".topnav").topNavigate(i),$("#mark").markMenu(i),HTPoiConfig.onInit(i)})))}))}));